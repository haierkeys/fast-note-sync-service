import{r as e,w as s,j as a}from"./vendor-CePkgVYi.js";import{A as t,a as r,b as n,c as i,d as o,e as l,f as d,g as c}from"./alert-dialog-BrlSLVOJ.js";import{a as m,e as u,g as x,h,B as p,t as g,i as f,j,k as N,n as v,o as y,l as b,I as w,L as k}from"./index-BFc3BmsD.js";import{C as S}from"./checkbox-B4wUTeUV.js";import{I as C,aa as T,ab as I,_ as L,ac as _,b as F,E,L as D,ad as A,ae as U,af as M,ag as P,ah as R,a2 as $,ai as B,aj as K,ak as V,al as z,S as G,C as H,am as O,an as J,ao as Z,ap as q,aq as W,a6 as Q,ar as X,l as Y,a0 as ee,as as se,a4 as ae}from"./vendor-icons-D3bVgkGi.js";import{T as te}from"./tooltip-hEYc448y.js";import"./vendor-ui-BwPMR9gB.js";import"./vendor-lottie-Cgk9p7OH.js";import"./vendor-animation-Cs3gejBo.js";function re({showUpgrade:t=!0,children:r}){const{t:n}=s(),{versionInfo:i,isLoading:o}=function(){const{t:a}=s(),{setVersionInfo:t}=h(),[r,n]=e.useState(null),[i,o]=e.useState(!1),[l,d]=e.useState(null);return e.useEffect(()=>{(async()=>{o(!0),d(null);try{const e=await fetch(m(u.API_URL+"/api/version"),{method:"GET",headers:{"Content-Type":"application/json",Domain:window.location.origin,Lang:x()}});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();s.code<100&&s.code>0&&s.data?(n(s.data),t(s.data)):d(s.message||a("getVersionError"))}catch(e){d(a("getVersionError"))}finally{o(!1)}})()},[t,a]),{versionInfo:r,isLoading:i,error:l}}(),{checkUpdate:l,isChecking:d,updateResult:c}=function(){const[s,a]=e.useState(!1),[t,r]=e.useState(null),[n,i]=e.useState(null);return{checkUpdate:e.useCallback(async e=>{if(!e)return r("Current version is unknown"),null;a(!0),r(null);try{const e=await fetch(m(u.API_URL+"/api/version"),{headers:{"Content-Type":"application/json",Domain:window.location.origin,Lang:x()}});if(!e.ok)throw new Error(`GitHub API error: ${e.status}`);const s=await e.json();if(s.code>=100||s.code<=0||!s.data)throw new Error(s.message||"Failed to get version info");const a=s.data,t={hasUpdate:a.versionIsNew||!1,latestVersion:(a.versionIsNew?a.versionNewName:a.version)||a.gitTag,releaseUrl:a.versionNewLink,releaseNotes:a.versionNewChangelog,releaseNotesContent:a.versionNewChangelogContent,publishedAt:a.buildTime};return i(t),t}catch(s){const e=s instanceof Error?s.message:"Failed to check for updates";return r(e),null}finally{a(!1)}},[]),isChecking:s,error:t,updateResult:n}}(),[f,j]=e.useState(!1);return a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(C,{className:"h-5 w-5"}),n("ui.system.versionInfo")]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:n("ui.system.repo")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("a",{href:"https://github.com/haierkeys/fast-note-sync-service",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate max-w-37.5 sm:max-w-none",children:n("ui.system.githubRepo")}),a.jsx("span",{className:"text-muted-foreground",children:"/"}),a.jsx("a",{href:"https://cnb.cool/haierkeys/fast-note-sync-service",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate max-w-37.5 sm:max-w-none",children:n("ui.system.cnbMirror")})]})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(I,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:n("ui.system.currentVersion")})]}),a.jsx("div",{className:"flex items-center gap-2",children:o?a.jsx("code",{className:"text-sm font-mono text-muted-foreground",children:n("ui.common.loading")}):a.jsx(a.Fragment,{children:(null==i?void 0:i.versionNewLink)?a.jsx("a",{href:i.versionNewLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-mono text-primary hover:underline",children:i.version}):a.jsx("code",{className:"text-sm font-mono text-muted-foreground",children:(null==i?void 0:i.version)||n("ui.common.unknown")})})})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(L,{className:"h-5 w-5 text-muted-foreground "+(d?"animate-spin":"")}),a.jsx("span",{className:"text-sm font-medium",children:n("ui.system.checkUpdate")})]}),a.jsx(p,{variant:"outline",size:"sm",onClick:async()=>{if(null==i?void 0:i.version){const e=await l(i.version);e&&g.success(e.hasUpdate?n("ui.system.newVersionAvailable"):n("ui.system.alreadyLatest"))}},disabled:d||o||!(null==i?void 0:i.version),className:"rounded-xl",children:n(d?"ui.system.checking":"ui.system.checkNow")})]}),c||(null==i?void 0:i.versionIsNew)?a.jsx("div",{className:"rounded-xl p-4 "+((null==c?void 0:c.hasUpdate)||(null==i?void 0:i.versionIsNew)?"bg-primary/10 border border-primary/20":"bg-muted/50"),children:a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[(null==c?void 0:c.hasUpdate)||(null==i?void 0:i.versionIsNew)?a.jsx(_,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}):a.jsx(F,{className:"h-5 w-5 text-green-500 shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:(null==c?void 0:c.hasUpdate)||(null==i?void 0:i.versionIsNew)?n("ui.system.newVersionAvailable"):n("ui.system.alreadyLatest")}),a.jsxs("div",{className:"flex items-center gap-2",children:[((null==c?void 0:c.latestVersion)||(null==i?void 0:i.versionNewName)||(null==i?void 0:i.version))&&a.jsx("code",{className:"text-xs font-mono bg-background px-2 py-0.5 rounded",children:(null==c?void 0:c.latestVersion)||(null==i?void 0:i.versionNewName)||(null==i?void 0:i.version)}),((null==c?void 0:c.hasUpdate)||(null==i?void 0:i.versionIsNew))&&((null==c?void 0:c.releaseUrl)||(null==i?void 0:i.versionNewLink))&&a.jsxs("a",{href:(null==c?void 0:c.releaseUrl)||(null==i?void 0:i.versionNewLink),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[n("ui.system.viewRelease")," ",a.jsx(E,{className:"h-3 w-3"})]}),t&&((null==c?void 0:c.hasUpdate)||(null==i?void 0:i.versionIsNew))&&a.jsxs(p,{variant:"ghost",size:"sm",disabled:f,onClick:async()=>{const e=localStorage.getItem("token");if(e){j(!0);try{const s=await fetch(m(u.API_URL+"/api/admin/upgrade?version=latest"),{headers:{Authorization:`Bearer ${e}`,Lang:x()}}),a=await s.json();0===a.code||a.code<100&&a.code>0?(g.success(n("ui.system.upgradeSuccess")),setTimeout(()=>{window.location.reload()},2e3)):(g.error(a.message||n("ui.system.upgradeFailed")),j(!1))}catch{g.error(n("ui.system.upgradeFailed")),j(!1)}}},className:"h-6 px-2 text-xs text-primary hover:bg-primary/10 rounded-md gap-1 ml-1 relative group transition-all duration-300",children:[f?a.jsx(D,{className:"h-3 w-3 animate-spin"}):a.jsx(A,{className:"h-3 w-3 group-hover:scale-110 transition-transform duration-300"}),a.jsxs("span",{className:"relative",children:[n(f?"ui.system.upgrading":"ui.system.upgradeNow"),!f&&a.jsxs("span",{className:"absolute -top-1 -right-1.5 flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-red-500 border border-background"})]})]})]})]})]})]}),a.jsx("div",{className:"space-y-2",children:((null==c?void 0:c.releaseNotesContent)||(null==i?void 0:i.versionNewChangelogContent))&&a.jsx("div",{className:"text-xs text-muted-foreground bg-background/50 p-3 rounded-lg border border-border/50 max-h-40 overflow-y-auto whitespace-pre-wrap leading-relaxed",children:(null==c?void 0:c.releaseNotesContent)||(null==i?void 0:i.versionNewChangelogContent)})})]})}):null]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t border-border"}),r]})]})}function ne(){const{t:t}=s(),{supportList:r,isLoading:n,refresh:i}=function(){const[s,a]=e.useState([]),[t,r]=e.useState(!1),[n,i]=e.useState(null);return{supportList:s,isLoading:t,error:n,refresh:e.useCallback(async()=>{r(!0),i(null);try{const e=await fetch(m(u.API_URL+"/api/support"),{method:"GET",headers:{"Content-Type":"application/json",Lang:x()}});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();0===s.code||s.code<100&&s.code>0?a(s.data||[]):i(s.message||"Failed to get support records")}catch(e){i("Failed to get support records")}finally{r(!1)}},[])}}(),[o,l]=e.useState("amount"),[d,c]=e.useState("desc");e.useEffect(()=>{i()},[i]);const h=e.useMemo(()=>[...r].sort((e,s)=>{let a=e[o]||"",t=s[o]||"";return"amount"===o&&(a=parseFloat(String(e.amount||"0").replace(/,/g,""))||0,t=parseFloat(String(s.amount||"0").replace(/,/g,""))||0),a<t?"asc"===d?-1:1:a>t?"asc"===d?1:-1:0}),[r,o,d]),g=(e,s)=>{l(e),c(s)};return n&&0===r.length?a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 h-full",children:[a.jsx(D,{className:"h-8 w-8 animate-spin text-muted-foreground mb-4"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:t("ui.common.loading")})]}):a.jsxs("div",{className:"flex flex-col h-full space-y-1.5 focus-visible:outline-none",children:[a.jsxs("div",{className:"flex items-center justify-between pb-0.5",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(U,{className:"h-5 w-5 text-red-500 fill-red-500/10"}),t("ui.support.title")]}),a.jsx(p,{variant:"ghost",size:"icon",onClick:i,disabled:n,className:"h-6 w-6 rounded-full hover:bg-muted",children:a.jsx(L,{className:"h-3 w-3 "+(n?"animate-spin":"")})})]}),a.jsx("p",{className:"text-xs leading-relaxed text-muted-foreground bg-muted/30 p-2.5 rounded-lg border border-border/40",children:t("ui.support.supportRequest")}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pb-2",children:[a.jsxs("a",{href:"https://ko-fi.com/haierkeys",target:"_blank",rel:"noopener noreferrer",className:"group relative flex flex-col items-center justify-center p-3 rounded-xl bg-orange-500/5 border border-orange-500/10 hover:bg-orange-500/10 hover:border-orange-500/30 transition-all cursor-pointer overflow-hidden",children:[a.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-40 transition-opacity",children:a.jsx(E,{className:"h-2.5 w-2.5 text-orange-600"})}),a.jsx("img",{src:"/static/images/kofi.png",alt:"Ko-fi",className:"h-16 w-auto object-contain mb-2 transition-transform group-hover:scale-105"}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] font-bold text-orange-600/80",children:[a.jsx(M,{className:"h-3.5 w-3.5"}),t("ui.support.buyMeACoffee")]})]}),a.jsx("div",{className:"group relative flex flex-col items-center justify-center p-3 rounded-xl bg-green-500/5 border border-green-500/10 hover:bg-green-500/10 hover:border-green-500/30 transition-all overflow-hidden",children:a.jsx(te,{content:a.jsx("img",{src:"/static/images/wxds.png",alt:"WeChat Pay",className:"w-56 h-auto rounded"}),side:"top",className:"p-1.5 bg-white border-0 shadow-2xl",children:a.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full cursor-help",children:[a.jsx("img",{src:"/static/images/wxds.png",alt:"WeChat Pay",className:"h-16 w-auto object-contain mb-2 rounded-sm opacity-90 group-hover:opacity-100 transition-all group-hover:scale-105"}),a.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] font-bold text-green-600/80",children:[a.jsx(P,{className:"h-3.5 w-3.5"}),t("ui.support.wechatReward")]})]})})})]}),a.jsxs("div",{className:"flex items-center justify-between pl-1 pt-1 pb-1",children:[a.jsxs("h3",{className:"text-xs font-bold text-muted-foreground/80 flex items-center gap-1.5",children:[a.jsx(R,{className:"h-3.5 w-3.5"}),t("ui.support.listTitle")]}),a.jsxs(f,{children:[a.jsx(j,{asChild:!0,children:a.jsxs(p,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[11px] gap-1 hover:bg-muted text-muted-foreground",children:[a.jsx($,{className:"h-3.5 w-3.5"}),t("amount"===o?"ui.support.sortDefault":"ui.support.sortTime")]})}),a.jsxs(N,{align:"end",className:"text-[11px] min-w-[120px]",children:[a.jsx(v,{className:"text-[10px] opacity-50 px-2 py-1",children:t("ui.support.sort")}),a.jsx(y,{}),a.jsx(b,{className:"px-2 py-1.5 cursor-pointer "+("amount"===o?"bg-primary/10 text-primary font-bold":""),onClick:()=>g("amount","desc"),children:t("ui.support.sortDefault")}),a.jsx(b,{className:"px-2 py-1.5 cursor-pointer "+("time"===o?"bg-primary/10 text-primary font-bold":""),onClick:()=>g("time","desc"),children:t("ui.support.sortTime")})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-border/40 rounded-lg bg-card/10 custom-scrollbar relative min-h-[120px]",children:0===h.length?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground space-y-2 opacity-60 py-8",children:[a.jsx(R,{className:"h-6 w-6 stroke-[1.5]"}),a.jsx("span",{className:"text-xs italic",children:t("ui.support.noData")})]}):a.jsx("div",{className:"divide-y divide-border/20",children:h.map((e,s)=>{const t=`${e.name||"Anonymous"}: ${e.message||e.item}`;return a.jsx(te,{side:"left",delay:300,content:t,className:"max-w-[300px] whitespace-normal",children:a.jsxs("div",{className:"grid grid-cols-[80px_1fr_80px] gap-2 px-3 py-2 items-center hover:bg-primary/5 transition-colors cursor-default text-[11px]",children:[a.jsx("div",{className:"text-muted-foreground font-mono tabular-nums whitespace-nowrap overflow-hidden text-ellipsis opacity-70",children:(e.time||"").split(" ")[0]||"N/A"}),a.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 overflow-hidden",children:[a.jsx(B,{className:"h-3 w-3 text-primary/60 flex-shrink-0"}),a.jsx("span",{className:"font-medium shrink-0 max-w-[80px] truncate",children:e.name||"Anonymous"}),e.message&&a.jsx("span",{className:"text-muted-foreground truncate text-[10px] opacity-70 border-l border-border/50 pl-1.5",children:e.message})]}),a.jsxs("div",{className:"text-right font-bold text-primary tabular-nums",children:[e.amount," ",a.jsx("span",{className:"text-[9px] opacity-70 font-normal ml-0.5",children:e.unit})]})]})},s)})})}),a.jsx("div",{className:"pt-0.5 text-[10px] text-center text-muted-foreground italic opacity-40",children:t("ui.support.thanks")})]})}function ie(e){if(0===e)return"0 B";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB","TB"][s]}function oe({refreshKey:t,children:r}){const{t:n}=s(),{systemInfo:i,isLoading:o,refresh:l}=function(){const[s,a]=e.useState(null),[t,r]=e.useState(!1),[n,i]=e.useState(null),o=localStorage.getItem("token"),l=e.useCallback(async()=>{if(o){r(!0),i(null);try{const e=await fetch(m(u.API_URL+"/api/admin/systeminfo"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`,Lang:x()}});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();0===s.code||s.code<100&&s.code>0?a(s.data):i(s.message||"Failed to get system info")}catch(e){i("Failed to get system info")}finally{r(!1)}}},[o]);return e.useEffect(()=>{l()},[l]),{systemInfo:s,isLoading:t,error:n,refresh:l}}();return e.useEffect(()=>{t&&l()},[t,l]),o&&!i?a.jsxs("div",{className:"flex items-center justify-center p-12 bg-card rounded-xl border border-border",children:[a.jsx(D,{className:"h-6 w-6 animate-spin text-muted-foreground mr-2"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:n("ui.common.loading")})]}):i?a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(K,{className:"h-5 w-5"}),n("ui.system.serviceInfo")]}),a.jsx(p,{variant:"ghost",size:"icon",onClick:l,disabled:o,className:"h-8 w-8 rounded-full hover:bg-muted",children:a.jsx(L,{className:"h-4 w-4 "+(o?"animate-spin":"")})})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-primary",children:[a.jsx(V,{className:"h-4 w-4"}),n("ui.system.runtimeInfo")]}),a.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-xs",children:[a.jsxs("div",{className:"text-muted-foreground",children:[n("ui.system.goVersion")," / ",n("ui.system.goroutines")," / ",n("ui.system.numGc")]}),a.jsxs("div",{className:"text-right font-medium text-[11px] sm:text-xs",children:[i.host.os,"/",i.host.arch,a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),a.jsx("span",{className:"font-mono",children:i.runtimeStatus.numGoroutine}),a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),a.jsx("span",{className:"font-mono",children:i.runtimeStatus.numGc})]}),a.jsxs("div",{className:"text-muted-foreground",children:[n("ui.system.startTime")," / ",n("ui.system.serviceUptime")]}),a.jsxs("div",{className:"text-right text-[11px] font-medium whitespace-nowrap",children:[a.jsx("span",{children:(()=>{var e;const s=new Date(i.startTime);return`${s.toLocaleString()} (${(null==(e=new Intl.DateTimeFormat(void 0,{timeZoneName:"shortOffset"}).formatToParts(s).find(e=>"timeZoneName"===e.type))?void 0:e.value)||""})`})()}),a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),a.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(i.uptime/3600),"h",Math.floor(i.uptime%3600/60),"m",Math.floor(i.uptime%60),"s"]})]}),a.jsxs("div",{className:"col-span-2 space-y-2 mt-1",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:n("ui.system.heapMemory")}),a.jsxs("span",{className:"font-medium",children:[ie(i.runtimeStatus.memAlloc)," / ",ie(i.runtimeStatus.memSys)]})]}),a.jsx("div",{className:"h-1.5 w-full bg-secondary/50 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary transition-all duration-700 ease-out",style:{width:`${Math.min(100,i.runtimeStatus.memAlloc/i.runtimeStatus.memSys*100)}%`}})})]})]})]}),a.jsx("div",{className:"border-t border-border/50"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-primary",children:[a.jsx(z,{className:"h-4 w-4"}),n("ui.system.hostInfo")]}),a.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-xs",children:[a.jsx("div",{className:"text-muted-foreground",children:n("ui.system.systemTime")}),a.jsx("div",{className:"text-right font-medium",children:(()=>{var e;const s=new Date(i.host.currentTime);return`${s.toLocaleString()} (${(null==(e=new Intl.DateTimeFormat(void 0,{timeZoneName:"shortOffset"}).formatToParts(s).find(e=>"timeZoneName"===e.type))?void 0:e.value)||""})`})()}),a.jsxs("div",{className:"text-muted-foreground",children:[n("ui.system.os")," / ",n("ui.system.kernelVersion")]}),a.jsxs("div",{className:"text-right font-medium text-[10px] sm:text-xs truncate",title:`${i.host.osPretty} (${i.host.kernelVersion})`,children:[i.host.osPretty,a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),a.jsx("span",{className:"font-mono",children:i.host.kernelVersion})]})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"grid grid-cols-2 gap-y-1.5 text-xs",children:[a.jsx("div",{className:"text-muted-foreground",children:n("ui.system.modelName")}),a.jsx("div",{className:"font-medium truncate text-right",title:i.cpu.modelName,children:i.cpu.modelName}),a.jsxs("div",{className:"text-muted-foreground",children:[n("ui.system.physicalCores")," / ",n("ui.system.cpuLoad")]}),a.jsxs("div",{className:"text-right font-medium",children:[i.cpu.logicalCores,"/",i.cpu.physicalCores,a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),i.cpu.loadAvg.load1.toFixed(2)," ",i.cpu.loadAvg.load5.toFixed(2)," ",i.cpu.loadAvg.load15.toFixed(2)]})]})}),a.jsx("div",{className:"space-y-2.5",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground",children:[n("ui.system.memoryUsage")," / ",n("ui.system.usedMemory")," / ",n("ui.system.totalMemory")]}),a.jsxs("span",{className:"font-medium",children:[a.jsxs("span",{className:"font-semibold",children:[i.memory.usedPercent.toFixed(1),"%"]}),a.jsx("span",{className:"text-muted-foreground mx-1.5 opacity-50",children:"|"}),ie(i.memory.used)," / ",ie(i.memory.total)]})]}),a.jsx("div",{className:"h-1.5 w-full bg-secondary rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full transition-all duration-700 ease-out fill-mode-forwards "+(i.memory.usedPercent>85?"bg-destructive":i.memory.usedPercent>65?"bg-orange-500":"bg-primary"),style:{width:`${i.memory.usedPercent}%`}})})]})})]})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t border-border/50"}),r]})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-card rounded-xl border border-border space-y-2",children:[a.jsx(_,{className:"h-8 w-8 text-destructive opacity-50"}),a.jsx("div",{className:"text-sm text-destructive",children:n("ui.common.error")})]})}function le({onBack:h,isDashboard:f=!1}){const{t:j}=s(),[N,v]=e.useState(null),[y,b]=e.useState(null),[C,I]=e.useState(null),[_,F]=e.useState(!0),[E,A]=e.useState(!1),[U,M]=e.useState(!1),[P,R]=e.useState(!1),[$,B]=e.useState(!1),[K,V]=e.useState(!1),[te,ie]=e.useState(!1),[le,de]=e.useState(!1),[ce,me]=e.useState(0),[ue,xe]=e.useState(!1),[he,pe]=e.useState(!1),[ge,fe]=e.useState(!1),[je,Ne]=e.useState(""),ve=localStorage.getItem("token"),ye=e.useCallback(e=>{v(s=>s?{...s,...e}:null)},[]),be=e.useCallback(e=>{b(s=>s?{...s,...e}:null)},[]),we=e.useCallback(e=>{I(s=>s?{...s,...e}:null)},[]),ke=async()=>{if(N)if(N.historyKeepVersions<100)g.error(j("ui.settings.historyKeepVersionsMinError"));else{if(N.historySaveDelay){const e=(e=>{if(!e)return null;const s=e.match(/^(\d+)(s|m|h|d)$/);if(!s)return null;const a=parseInt(s[1]);switch(s[2]){case"s":return a;case"m":return 60*a;case"h":return 3600*a;case"d":return 86400*a;default:return null}})(N.historySaveDelay);if(null===e)return void g.error(j("ui.settings.historySaveDelayFormatError"));if(e<10)return void g.error(j("ui.settings.historySaveDelayMinError"))}A(!0);try{const e=await fetch(m(u.API_URL+"/api/admin/config"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ve}`,Lang:x()},body:JSON.stringify(N)}),s=await e.json();0===s.code||s.code<100&&s.code>0?g.success(j("ui.settings.saveSuccess")):g.error(s.message||j("ui.settings.saveFailed"))}catch{g.error(j("ui.settings.saveFailed"))}finally{A(!1)}}};return e.useEffect(()=>{(async()=>{if(f)F(!1);else{F(!0);try{const e={Authorization:`Bearer ${ve}`,Lang:x()},[s,a,t]=await Promise.all([fetch(m(u.API_URL+"/api/admin/config"),{headers:e}).then(e=>e.json()),fetch(m(u.API_URL+"/api/admin/config/ngrok"),{headers:e}).then(e=>e.json()),fetch(m(u.API_URL+"/api/admin/config/cloudflare"),{headers:e}).then(e=>e.json())]);0===s.code||s.code<100&&s.code>0?v(s.data):(g.error(s.message||j("ui.common.error")),N||null==h||h()),(0===a.code||a.code<100&&a.code>0)&&b(a.data),(0===t.code||t.code<100&&t.code>0)&&I(t.data)}catch{g.error(j("ui.common.error")),N||null==h||h()}finally{F(!1)}}})()},[h,j,ve,f]),_?a.jsx("div",{className:"p-8 text-center",children:j("ui.common.loading")}):N||f?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-24 md:pb-4",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(re,{showUpgrade:!f}),!f&&a.jsx(oe,{refreshKey:ce,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(G,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.common.actions")})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(t,{open:te,onOpenChange:ie,children:[a.jsxs(p,{variant:"outline",onClick:()=>ie(!0),disabled:$,className:"rounded-xl border-destructive/20 hover:border-destructive/50 hover:bg-destructive/10 text-destructive",children:[$?a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(L,{className:"h-4 w-4 mr-2"}),j("ui.system.restartService")]}),a.jsxs(r,{className:"rounded-2xl",children:[a.jsxs(n,{children:[a.jsx(i,{children:j("ui.system.restartService")}),a.jsx(o,{children:j("ui.system.restartServiceConfirm")})]}),a.jsxs(l,{children:[a.jsx(d,{className:"rounded-xl",children:j("ui.common.cancel")}),a.jsx(c,{onClick:async()=>{B(!0),ie(!1);try{const e=await fetch(m(u.API_URL+"/api/admin/restart"),{headers:{Authorization:`Bearer ${ve}`,Lang:x()}}),s=await e.json();0===s.code||s.code<100&&s.code>0?(g.success(j("api.system.restart.success")),me(e=>e+1)):g.error(s.message||j("api.system.restart.error"))}catch{g.error(j("api.system.restart.error"))}finally{B(!1)}},className:"rounded-xl bg-destructive hover:bg-destructive/90",children:j("ui.common.confirm")})]})]})]}),a.jsxs(t,{open:le,onOpenChange:de,children:[a.jsxs(p,{variant:"outline",onClick:()=>de(!0),disabled:K,className:"rounded-xl",children:[K?a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(z,{className:"h-4 w-4 mr-2"}),j("ui.system.manualGC")]}),a.jsxs(r,{className:"rounded-2xl",children:[a.jsxs(n,{children:[a.jsx(i,{children:j("ui.system.manualGC")}),a.jsx(o,{children:j("ui.system.manualGCConfirm")})]}),a.jsxs(l,{children:[a.jsx(d,{className:"rounded-xl",children:j("ui.common.cancel")}),a.jsx(c,{onClick:async()=>{V(!0),de(!1);try{const e=await fetch(m(u.API_URL+"/api/admin/gc"),{headers:{Authorization:`Bearer ${ve}`,Lang:x()}}),s=await e.json();0===s.code||s.code<100&&s.code>0?(g.success(j("ui.system.manualGCSuccess")),me(e=>e+1)):g.error(s.message||j("api.system.gc.error"))}catch{g.error(j("api.system.gc.error"))}finally{V(!1)}},className:"rounded-xl",children:j("ui.common.confirm")})]})]})]})]})]})}),f&&a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-4 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(H,{className:"h-5 w-5"}),j("ui.common.helpAndSupport")]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("a",{href:"https://github.com/haierkeys/fast-note-sync-service/issues/new",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-xl bg-muted/30 hover:bg-primary/5 border border-border/50 hover:border-primary/20 transition-all group",children:[a.jsx("div",{className:"p-2 rounded-lg bg-background border border-border group-hover:border-primary/20 transition-colors",children:a.jsx(O,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:j("ui.common.githubIssue")}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:j("ui.common.githubIssueDesc")})]})]}),a.jsxs("a",{href:"https://t.me/obsidian_users",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-xl bg-muted/30 hover:bg-primary/5 border border-border/50 hover:border-primary/20 transition-all group",children:[a.jsx("div",{className:"p-2 rounded-lg bg-background border border-border group-hover:border-primary/20 transition-colors",children:a.jsx(J,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:j("ui.common.telegramGroup")}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:j("ui.common.telegramGroupDesc")})]})]})]})]}),N&&!f&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(Z,{className:"h-5 w-5"}),j("ui.settings.fontConfig")]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Z,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.fontSet")})]}),a.jsx(w,{value:N.fontSet,onChange:e=>ye({fontSet:e.target.value}),placeholder:"e.g. /static/fonts/font.css",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.fontSetDesc")}})]}),a.jsx("div",{className:"pt-2",children:a.jsx(p,{onClick:ke,disabled:E,className:"rounded-xl",children:E?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveSettings")]})})})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(W,{className:"h-5 w-5"}),j("ui.settings.tunnelGatewayConfig")]}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.tunnelGatewayDesc")}})]}),y&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-md font-semibold text-primary",children:"Ngrok"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.ngrokDesc")}})]}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{id:"ngrokEnabled",checked:y.enabled,onCheckedChange:e=>be({enabled:!!e})}),a.jsx(k,{htmlFor:"ngrokEnabled",className:"text-sm cursor-pointer",children:j("ui.common.isEnabled")})]})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(k,{className:"text-sm font-medium",children:"Token"}),a.jsx(w,{value:y.authToken,onChange:e=>be({authToken:e.target.value}),placeholder:"e.g. 2Rk9...",className:"rounded-xl"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(k,{className:"text-sm font-medium",children:j("ui.settings.customDomain")}),a.jsx(w,{value:y.domain,onChange:e=>be({domain:e.target.value}),placeholder:"e.g. static.yourdomain.com",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:j("ui.settings.customDomainDesc")})]}),a.jsx("div",{className:"pt-2",children:a.jsx(p,{onClick:async()=>{if(y){M(!0);try{const e=await fetch(m(u.API_URL+"/api/admin/config/ngrok"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ve}`,Lang:x()},body:JSON.stringify(y)}),s=await e.json();0===s.code||s.code<100&&s.code>0?g.success(j("ui.settings.saveSuccess")):g.error(s.message||j("ui.settings.saveFailed"))}catch{g.error(j("ui.settings.saveFailed"))}finally{M(!1)}}},disabled:U,className:"rounded-xl",children:U?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveNgrok")]})})})]})]}),y&&C&&a.jsx("div",{className:"border-t border-border"}),C&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-md font-semibold text-primary",children:"Cloudflare Tunnel"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.cloudflareDesc")}})]}),a.jsxs("div",{className:"space-y-3 pl-2",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{id:"cfEnabled",checked:C.enabled,onCheckedChange:e=>we({enabled:!!e})}),a.jsx(k,{htmlFor:"cfEnabled",className:"text-sm cursor-pointer",children:j("ui.common.isEnabled")})]})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(k,{className:"text-sm font-medium",children:"Token"}),a.jsx(w,{value:C.token,onChange:e=>we({token:e.target.value}),placeholder:"e.g. eyJh...",className:"rounded-xl"})]}),a.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{id:"cfLogEnabled",checked:C.logEnabled,onCheckedChange:e=>we({logEnabled:!!e})}),a.jsx(k,{htmlFor:"cfLogEnabled",className:"text-sm cursor-pointer",children:j("ui.settings.enableLog")})]}),a.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:j("ui.settings.cloudflareLogDesc")})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx(p,{onClick:async()=>{if(C)if(he){R(!0);try{const e=await fetch(m(u.API_URL+"/api/admin/config/cloudflare"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ve}`,Lang:x()},body:JSON.stringify(C)}),s=await e.json();0===s.code||s.code<100&&s.code>0?g.success(j("ui.settings.saveSuccess")):g.error(s.message||j("ui.settings.saveFailed"))}catch{g.error(j("ui.settings.saveFailed"))}finally{R(!1)}}else g.error(j("ui.settings.cloudflaredTestRequired"))},disabled:P,className:"rounded-xl",children:P?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveCloudflare")]})}),a.jsx(p,{onClick:async()=>{xe(!0);try{const e=await fetch(m(u.API_URL+"/api/admin/cloudflared_tunnel_download"),{headers:{Authorization:`Bearer ${ve}`,Lang:x()}}),s=await e.json();0===s.code||s.code<100&&s.code>0?(g.success(j("ui.settings.downloadSuccess")),pe(!0)):(Ne(`${s.message?s.message:j("ui.settings.downloadFailed")}${s.details?`\n\n${s.details}`:""}`),fe(!0))}catch(e){const s=e instanceof Error?e.message:String(e);Ne(`${j("ui.settings.downloadFailed")}${s?`\n\n${s}`:""}`),fe(!0)}finally{xe(!1)}},disabled:ue,className:"rounded-xl",variant:"outline",children:ue?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.common.downloading")]}):a.jsxs(a.Fragment,{children:[a.jsx(Q,{className:"h-4 w-4 mr-2"}),j("ui.settings.downloadCloudflared")]})}),a.jsx(t,{open:ge,onOpenChange:fe,children:a.jsxs(r,{className:"rounded-2xl max-w-2xl w-[90vw]",children:[a.jsxs(n,{children:[a.jsxs(i,{className:"text-destructive flex items-center gap-2",children:[a.jsx(X,{className:"h-5 w-5"}),j("ui.settings.downloadFailed")]}),a.jsx(o,{className:"whitespace-pre-wrap break-all mt-2 font-mono text-xs bg-muted/50 p-4 rounded-xl border border-border/50 max-h-60 overflow-y-auto",children:je})]}),a.jsx(l,{children:a.jsx(d,{className:"rounded-xl w-full sm:w-auto",children:j("ui.common.confirm")})})]})})]})]})]})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:f?a.jsx("div",{className:"rounded-xl border border-border bg-card p-4 custom-shadow",children:a.jsx(ne,{})}):N?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(Y,{className:"h-5 w-5"}),j("ui.settings.securityConfig")]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Y,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.authTokenKey")})]}),a.jsx(w,{value:N.authTokenKey,onChange:e=>ye({authTokenKey:e.target.value}),placeholder:"e.g. token",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.authTokenKeyDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.tokenExpiry")})]}),a.jsx(w,{value:N.tokenExpiry,onChange:e=>ye({tokenExpiry:e.target.value}),placeholder:"e.g. 365d, 24h, 30m",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.tokenExpiryDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(se,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.registerIsEnable")})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{id:"registerIsEnable",checked:N.registerIsEnable,onCheckedChange:e=>ye({registerIsEnable:!!e})}),a.jsx(k,{htmlFor:"registerIsEnable",className:"text-sm",children:N.registerIsEnable?j("ui.common.isEnabled"):j("ui.common.close")})]}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.registerIsEnableDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(X,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.adminUid")})]}),a.jsx(w,{type:"number",value:N.adminUid,onChange:e=>ye({adminUid:parseInt(e.target.value)||0}),placeholder:"e.g. 1",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.adminUidDesc")}})]}),a.jsx("div",{className:"pt-2",children:a.jsx(p,{onClick:ke,disabled:E,className:"rounded-xl",children:E?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveSettings")]})})})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(X,{className:"h-5 w-5"}),j("ui.settings.systemConfig")]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(X,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.shareTokenKey")})]}),a.jsx(w,{value:N.shareTokenKey,onChange:e=>ye({shareTokenKey:e.target.value}),placeholder:"e.g. fns",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.shareTokenKeyDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.shareTokenExpiry")})]}),a.jsx(w,{value:N.shareTokenExpiry,onChange:e=>ye({shareTokenExpiry:e.target.value}),placeholder:"e.g. 30d, 24h, 30m",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.shareTokenExpiryDesc")}})]}),a.jsx("div",{className:"pt-2",children:a.jsx(p,{onClick:ke,disabled:E,className:"rounded-xl",children:E?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveSettings")]})})})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 space-y-5 custom-shadow",children:[a.jsxs("h2",{className:"text-lg font-bold text-card-foreground flex items-center gap-2",children:[a.jsx(T,{className:"h-5 w-5"}),j("ui.settings.noteRelatedConfig")]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(W,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.fileChunkSize")})]}),a.jsx(w,{value:N.fileChunkSize,onChange:e=>ye({fileChunkSize:e.target.value}),placeholder:"e.g. 1MB, 512KB",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.fileChunkSizeDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ae,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.softDeleteRetentionTime")})]}),a.jsx(w,{value:N.softDeleteRetentionTime,onChange:e=>ye({softDeleteRetentionTime:e.target.value}),placeholder:"e.g. 30d, 24h",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.softDeleteRetentionTimeDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.uploadSessionTimeout")})]}),a.jsx(w,{value:N.uploadSessionTimeout,onChange:e=>ye({uploadSessionTimeout:e.target.value}),placeholder:"e.g. 1h, 30m",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.uploadSessionTimeoutDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.historyKeepVersions")})]}),a.jsx(w,{type:"number",min:"100",value:N.historyKeepVersions,onChange:e=>ye({historyKeepVersions:parseInt(e.target.value)||100}),placeholder:"e.g. 100",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.historyKeepVersionsDesc")}})]}),a.jsx("div",{className:"border-t border-border"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:j("ui.settings.historySaveDelay")})]}),a.jsx(w,{value:N.historySaveDelay,onChange:e=>ye({historySaveDelay:e.target.value}),placeholder:"e.g. 10s, 1m",className:"rounded-xl"}),a.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",dangerouslySetInnerHTML:{__html:j("ui.settings.historySaveDelayDesc")}})]}),a.jsx("div",{className:"pt-2",children:a.jsx(p,{onClick:ke,disabled:E,className:"rounded-xl",children:E?a.jsxs(a.Fragment,{children:[a.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),j("ui.auth.submitting")]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),j("ui.settings.saveSettings")]})})})]})]}):null})]}):a.jsx("div",{className:"p-8 text-center text-destructive",children:j("ui.common.error")})}export{le as SystemSettings,le as default};
