# 更新日志 (CHANGELOG)

本项目的所有重大变更都将记录在此文件中。

本项目遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/0.3.0/) 规范。

---

## v1.13.0
> *2026/01/30*

### ✨ 新增
- **同步**: 新增附件、笔记、配置离线删除同步功能。
- **同步**: 增量同步模式下增加自动下载缺失文件功能。

---

## v1.12.0
> *2026/01/29*

### 🚀 优化
- **语言**: 将所有代码注释及文档统一翻译/更新为中英双语或英文。
- **API**: 优化项目返回信息的国际化支持。
- **稳定性**: 修正自动资源前缀问题。
- **API**: 新增 API 扩展：编辑操作、反向链接 (Backlinks)、健康检查。

---

## v1.11.3
> *2026/01/27*

### 🛠️ 修复
- **附件**: 修正附件下载请求超时（30s）导致报错的问题，调整为可配置且默认 1 小时。

---

## v1.11.2
> *2026/01/27*

### ✨ 新增
- **WebGui**: 增加 Obsidian SSO 自动授权机制。

### 🚀 优化
- **WebGui**: 优化授权配置界面 UI。

---

## v1.11.1
> *2026/01/26*

### 🚀 优化
- **发布**: 调整版本发布流程。

---

## v1.11.0
> *2026/01/26*

### ✨ 新增
- **功能**: 新增版本检测及版本信息获取功能。

---

## v1.10.8
> *2026/01/26*

### ✨ 新增
- **API**: 新增附件状态检测接口。

---

## v1.10.7
> *2026/01/25*

### 🛠️ 修复
- **稳定性**: 修复由于上传文件校验一致性判断引发的服务崩溃问题。

---

## v1.10.6
> *2026/01/24*

### ✨ 新增
- **WebGui**: 附件管理页面增加分页功能。

---

## v1.10.5
> *2026/01/23*

### 🛠️ 修复
- **回收站**: 修正从回收站和历史版本中恢复笔记/版本的问题。

---

## v1.10.4
> *2026/01/23*

### 🛠️ 修复
- **附件**: 修复附件上传过程中网络断开导致的异常，降低报错等级。

---

## v1.10.3
> *2026/01/20*

### 🚀 优化
- **WebGui**: 取消笔记仓库放大效果，改为选中阴影效果。

### 🛠️ 修复
- **WebGui**: 修复笔记仓库名称含特殊字符时无法访问的问题。

---

## v1.10.2
> *2026/01/20*

### 🛠️ 修复
- **管理**: 修复新用户无法注册及无法关闭用户注册设置的 Bug。

---

## v1.10.1
> *2026/01/20*

### 🛠️ 修复
- **管理**: 修复新用户无法注册的问题。

---

## v1.10.0
> *2026/01/19*

### ✨ 新增
- **附件**: 增加附件管理相关功能。
- **鉴权**: 增加 Token 过期时间配置。
- **分享**: 增加分享功能相关接口。
- **文档**: 增加 Swagger API 文档。

### 🚀 优化
- **WebGui**: 调整 WebGui 部署路径。
- **API**: 细化接口错误提示。

### 🛠️ 修复
- **WebGui**: 修正 WebGui 自动翻译导致的提示问题。

---

## v1.9.1
> *2026/01/14*

### 🚀 优化
- **WebGui**: 增加蓝色配色方案，优化编辑器显示效果。

---

## v1.9.0
> *2026/01/14*

### ✨ 新增
- **WebGui**: 界面全新重构（由 @ZyphrZero 贡献）。
- **WebGui**: 更换编辑器为 Vditor，支持富文本和 Markdown 即时渲染。
- **WebGui**: 支持自定义笔记搜索、列表字段排序及颜色主题。
- **WebGui**: 新增暗黑模式、在线版本检测及回收站笔记恢复功能。
- **设置**: 新增历史记录保留版本数及保存延迟设置。

### 🚀 优化
- **安全**: 优化服务令牌加密混淆字符。

---

## v1.8.1
> *2026/01/12*

### 🔄 变更
- **架构**: 引入 DDD 分层架构（由 @ZyphrZero 贡献），移除全局变量，实现依赖注入模式。

### 🚀 优化
- **同步**: 离线笔记合并优化，实现基于行级的冲突检测与三方合并。
- **性能**: 新增 Worker Pool 和 Per-User Write Queue，解决 SQLite 并发锁定问题。
- **WebSocket**: 优化 Context 生命周期管理，增强 TraceID 追踪能力。

### 🛠️ 修复
- **逻辑**: 修复笔记重命名导致的笔记丢失和报错问题。

---

## v1.7.3
> *2026/01/09*

### 🛠️ 修复
- **数据库**: 增加数据库创建失败时的友好报错提示。

---

## v1.7.2
> *2026/01/09*

### ✨ 新增
- **WebGui**: 增加配置设置功能及相关接口。
- **管理**: 增加管理员 ID 设置。

---

## v1.7.1
> *2026/01/09*

### ✨ 新增
- **同步**: 新增离线设备笔记编辑合并功能（需插件端 v1.7+ 开启）。

---

## v1.6.3
> *2026/01/08*

### 🚀 优化
- **WebGui**: 优化笔记列表搜索功能。
- **WebGui**: 增加图标显示。
- **WebGui**: 笔记仓库增加附件显示和刷新按钮。

### 🛠️ 修复
- **稳定性**: 修复并发查询时可能出现的异常。

---

## v1.6.1
> *2026/01/07*

### 🚀 优化
- **性能**: 优化大笔记库同步效率及数据处理（需插件端 v1.6+）。
- **缓存**: 为静态内容增加浏览器缓存机制。

> [!CAUTION]
> 本版本涉及数据库结构优化，建议删除原服务端 `storage/database` 目录下的 DB 文件，笔记修改历史将重新生成。

---

## v1.5.4
> *2026/01/06*

### 🛠️ 修复
- **附件**: 修正上传附件时偶尔出现的报错问题。

---

## v1.5.3
> *2026/01/06*

### 🚀 优化
- **WebGui**: 对编辑功能进行延时加载，提升首页加载速度。

---

## v1.5.2
> *2026/01/05*

### 🛠️ 修复
- **同步**: 修正同步任务进度显示不准确的问题。

---

## v1.5.1
> *2026/01/04*

### 🛠️ 修复
- **逻辑**: 修正笔记重命名后无法正常删除的问题。
- **稳定性**: 修正大规模笔记同步时导致 WebSocket 连接重置的问题。
- **多语言**: 修复 WebGui 接口语言错误。

---

## v1.5.0
> *2026/01/04*

### ✨ 新增
- **回收站**: 增加笔记回收站功能。
- **WebGui**: 增加用户状态检测。
- **WebGui**: 注册页面增加关闭注册的检测。
- **WebGui**: 增加操作确认的键盘快捷键支持。

### 🚀 优化
- **WebGui**: 优化笔记编辑页面的使用体验。
- **数据库**: 优化并解决数据库并发访问问题。

### 🛠️ 修复
- **脚本**: 修正快捷脚本可能覆盖配置文件的问题。

---

## v1.4.7
> *2026/01/03*

### 🛠️ 修复
- **数据库**: 尝试解决 SQLite 并发问题，修正内部错误码。

---

## v1.4.6
> *2026/01/03*

### 🛠️ 修复
- **Docker**: 修正 Docker 环境下运行报 `temp` 目录不存在的问题。

---

## v1.4.5
> *2026/01/03*

### 🛠️ 修复
- **同步**: 修正首次同步或全量同步时无法同步附件的问题（需插件端 v1.5.14+）。

---

## v1.4.4
> *2026/01/02*

### 🛠️ 修复
- **访问**: 修正 Emoji 标题无法访问的问题。

### ✨ 新增
- **文档**: 增加帮助文件。

---

## v1.4.3
> *2026/01/02*

### 🔄 变更
- **仓库**: 笔记仓库删除操作改为软删除。

---

## v1.4.2
> *2026/01/01*

### ✨ 新增
- **WebGui**: 笔记删除操作增加红色的二次确认弹窗，防止误删。

---

## v1.4.1
> *2025/12/31*

### 🚀 优化
- **API**: 笔记资源（图片等）下载接口增加 ETag 浏览器缓存机制，提升加载速度。

---

## v1.4.0
> *2025/12/31*

### ✨ 新增
- **WebGui**: 增加最大化按钮，提升全屏编辑体验。
- **WebGui**: 笔记查看页面增加对 Obsidian 内嵌图片、PDF 以及其他附件的正常显示支持。
- **API**: 增加资源下载接口。

---

## v1.3.8
> *2025/12/31*

### 🚀 优化
- **服务端**: 为笔记建立内容哈希版本库，方便后续进行溯源、对比和合并操作。

---

## v1.3.7
> *2025/12/30*

### 🛠️ 修复
- **稳定性**: 为任务和升级脚本增加宕机恢复机制，避免单个任务报错导致整个服务崩溃。
- **稳定性**: 修复原有各层级出现的空指针（nil pointer）导致的 Panic 问题。

---

## v1.3.6
> *2025/12/30*

### 🛠️ 修复
- **任务管理**: 修复任务管理器中存在的报错问题。

---

## v1.3.5
> *2025/12/30*

### 🚀 优化
- **WebGui**: 优化笔记查看页面的显示效果。
- **脚本**: 优化一键安装/管理脚本。

---

## v1.3.4
> *2025/12/30*

### 🛠️ 修复
- **同步**: 修复同步命令处理错误导致的文件错误同步创建到所有客户端的问题。
- **脚本**: 修复一键脚本在 `Ctrl+C` 时导致已启动的服务被同步关闭的问题。

---

## v1.3.3
> *2025/12/29*

### 🛠️ 修复
- **同步**: 解决单用户多笔记仓库时可能出现的更新混淆问题。

---

## v1.3.2
> *2025/12/28*

### ✨ 新增
- **多语言**: 增加对多语言环境的支持。

### 🚀 优化
- **WebGui**: 优化笔记历史差异对比的显示效果。

---

## v1.3.1
> *2025/12/28*

### 🚀 优化
- **逻辑处理**: 优化笔记修改标题时的逻辑处理流程。

---

## v1.3.0
> *2025/12/28*

### ✨ 新增
- **WebGui**: 增加设置项，允许用户控制 WebGui 的字体设置。

---

## v1.2.6
> *2025/12/27*

### 🚀 优化
- **WebGui**: 优化字体加载逻辑，避免字体加载导致的界面卡顿。

---

## v1.2.5
> *2025/12/27*

### ✨ 新增
- **客户端**: 增加对客户端名称的记录支持。

### 🚀 优化
- **清理逻辑**: 增加笔记重命名后的同步清理逻辑。

---

## v1.2.4
> *2025/12/27*

### 🛠️ 修复
- **WebGui**: 修复历史版本内容为空时导致的显示 Bug。

---

## v1.2.3
> *2025/12/27*

### ✨ 新增
- **API**: 增加笔记历史相关的接口和功能。

### 🚀 优化
- **数据库**: 优化数据库查询效率。
- **WebGui**: 修改 WebGui 显示字体并修复各类显示 Bug。

### 🛠️ 修复
- **稳定性**: 修复高并发访问时出现的问题。

---

## v1.2.2
> *2025/12/27*

### 🛠️ 修复
- **WebGui**: 修正笔记历史为空时导致的页面空白问题。

---

## v1.2.1
> *2025/12/27*

### ✨ 新增
- **API**: 增加笔记历史相关接口和功能。

### 🚀 优化
- **数据库**: 优化数据库查询效率。
- **稳定性**: 解决大量并发访问时的稳定性问题。

---

## v1.0.4
> *2025/12/26*

### 🛠️ 修复
- **WebGui**: 修正 WebGui 页面构建（Build）异常导致的空白显示问题。

---

## v1.0.3
> *2025/12/25*

### 🛠️ 修复
- **WebGui**: 解决笔记标题过长导致的排版显示问题。

---

## v1.0.2
> *2025/12/25*

### 🚀 优化
- **附件**: 优化附件上传逻辑，显著减少上传时间。

### 🛠️ 修复
- **CI/CD**: 修正 GitHub Action 的更新限制问题。

---

## v1.0.1
> *2025/12/23*

### 🛠️ 修复
- **权限**: 修复部分系统在上传时由于权限不足导致的问题。

---

## v1.0.0
> *2025/12/22*

### ✨ 新增
- **同步**: 新增配置文件同步相关功能及接口。

### 🚀 优化
- **脚本**: 优化显示脚本的输出。

### 🛠️ 修复
- **脚本**: 修正脚本控制运行失败的问题。

---

## v0.11.5
> *2025/12/19*

### 🛠️ 修复
- **Docker**: 修正 Docker 镜像无法执行的问题。

---

## v0.11.4
> *2025/12/18*

### ✨ 新增
- **鉴权**: 在验证授权接口中增加下发版本信息的功能。

---

## v0.11.3
> *2025/12/16*

### ✨ 新增
- **清理**: 增加程序启动时的自动清理任务以及 Session 自动清理逻辑。

### 🛠️ 修复
- **稳定性**: 修正高并发下由于连接关闭导致的异常退出问题。

---

## v0.11.2
> *2025/12/15*

### 🛠️ 修复
- **稳定性**: 修正并发下由于连接关闭导致的程序异常退出。

---

## v0.11.1
> *2025/12/14*

### ✨ 新增
- **架构**: 给消息增加前缀，方便后续业务功能扩容。

---

## v0.10.2
> *2025/12/12*

### ✨ 新增
- **设置**: 增加上传下载分片设置项（默认 512KB）。

---

## v0.10.1
> *2025/12/12*

### ✨ 新增
- **功能**: 增加二进制文件下载功能。
- **功能**: 增加 WebSocket 分块下载功能。
- **功能**: 增加版本控制管理。

---

## v0.9.6
> *2025/12/11*

- 初始版本（记录开始）。
