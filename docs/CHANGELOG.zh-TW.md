# 更新日誌 (CHANGELOG)

本專案的所有重大變更都將記錄在此文件中。

本專案遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/0.3.0/) 規範。

---

## v1.7.2
> *2026/01/09*

### ✨ 新增
- **WebGui**: 增加配置設置功能及相關接口。
- **管理**: 增加管理員 ID 設置。

---

## v1.7.1
> *2026/01/09*

### ✨ 新增
- **同步**: 新增離線設備筆記編輯合併功能（需插件端 v1.7+ 開啟）。

---

## v1.6.3
> *2026/01/08*

### 🚀 優化
- **WebGui**: 優化筆記列表搜尋功能。
- **WebGui**: 增加圖示顯示。
- **WebGui**: 筆記倉庫增加附件顯示和刷新按鈕。

### 🛠️ 修復
- **穩定性**: 修復併發查詢時可能出現的異常。

---

## v1.6.1
> *2026/01/07*

### 🚀 優化
- **性能**: 優化大筆記庫同步效率及數據處理（需插件端 v1.6+）。
- **快取**: 為靜態内容增加瀏覽器快取機制。

> [!CAUTION]
> 本版本涉及數據庫結構優化，建議刪除原服務端 `storage/database` 目錄下的 DB 文件，筆記修改歷史將重新生成。

---

## v1.5.4
> *2026/01/06*

### 🛠️ 修復
- **附件**: 修正上傳附件時偶爾出現的報錯問題。

---

## v1.5.3
> *2026/01/06*

### 🚀 優化
- **WebGui**: 對編輯功能進行延時加載，提升首頁加載速度。

---

## v1.5.2
> *2026/01/05*

### 🛠️ 修復
- **同步**: 修正同步任務進度顯示不準確的問題。

---

## v1.5.1
> *2026/01/04*

### 🛠️ 修復
- **邏輯**: 修正筆記重新命名後無法正常刪除的問題。
- **穩定性**: 修正大規模筆記同步時導致 WebSocket 連接重置的問題。
- **多語言**: 修復 WebGui 接口語言錯誤。

---

## v1.5.0
> *2026/01/04*

### ✨ 新增
- **回收站**: 增加筆記回收站功能。
- **WebGui**: 增加用戶狀態檢測。
- **WebGui**: 註冊頁面增加關閉註冊的檢測。
- **WebGui**: 增加操作確認的鍵盤快捷鍵支持。

### 🚀 優化
- **WebGui**: 優化筆記編輯頁面的使用體驗。
- **數據庫**: 優化並解決數據庫併發訪問問題。

### 🛠️ 修復
- **脚本**: 修正快捷脚本可能覆蓋配置文件的問題。

---

## v1.4.7
> *2026/01/03*

### 🛠️ 修復
- **數據庫**: 嘗試解決 SQLite 併發問題，修正内部錯誤碼。

---

## v1.4.6
> *2026/01/03*

### 🛠️ 修復
- **Docker**: 修正 Docker 環境下運行報 `temp` 目録不存在的問題。

---

## v1.4.5
> *2026/01/03*

### 🛠️ 修復
- **同步**: 修正首次同步或全量同步時無法同步附件的問題（需插件端 v1.5.14+）。

---

## v1.4.4
> *2026/01/02*

### 🛠️ 修復
- **訪問**: 修正 Emoji 標題無法訪問的問題。

### ✨ 新增
- **文檔**: 增加幫助文件。

---

## v1.4.3
> *2026/01/02*

### 🔄 變更
- **倉庫**: 筆記倉庫删除操作改為軟删除。

---

## v1.4.2
> *2026/01/01*

### ✨ 新增
- **WebGui**: 筆記删除操作增加红色的二次確認彈窗，防止誤删。

---

## v1.4.1
> *2025/12/31*

### 🚀 優化
- **API**: 筆記資源（圖片等）下載接口增加 ETag 瀏覽器快取機制，提升加載速度。

---

## v1.4.0
> *2025/12/31*

### ✨ 新增
- **WebGui**: 增加最大化按鈕，提升全屏編輯體驗。
- **WebGui**: 筆記查看頁面增加對 Obsidian 内嵌圖片、PDF 以及其他附件的正常顯示支持。
- **API**: 增加資源下載接口。

---

## v1.3.8
> *2025/12/31*

### 🚀 優化
- **服務器**: 為筆記建立内容哈希版本庫，方便後續進行溯源、對比和合併操作。

---

## v1.3.7
> *2025/12/30*

### 🛠️ 修復
- **穩定性**: 為任務和升級脚本增加宕機恢複機制，避免單個任務報錯導致整個服務崩潰。
- **穩定性**: 修復原有各層級出現的空指針（nil pointer）導致的 Panic 問題。

---

## v1.3.6
> *2025/12/30*

### 🛠️ 修復
- **任務管理**: 修復任務管理器中存在的報錯問題。

---

## v1.3.5
> *2025/12/30*

### 🚀 優化
- **WebGui**: 優化筆記查看頁面的顯示效果。
- **脚本**: 優化一鍵安裝/管理脚本。

---

## v1.3.4
> *2025/12/30*

### 🛠️ 修復
- **同步**: 修復同步命令處理錯誤導致的文件錯誤同步創建到所有客戶端的問題。
- **脚本**: 修復一鍵脚本在 `Ctrl+C` 時導致已啟動的服務被同步關閉的問題。

---

## v1.3.3
> *2025/12/29*

### 🛠️ 修復
- **同步**: 解決單用戶多筆記倉庫時可能出現的更新混淆問題。

---

## v1.3.2
> *2025/12/28*

### ✨ 新增
- **多語言**: 增加對多語言環境的支持。

### 🚀 優化
- **WebGui**: 優化筆記歷史差異對比的顯示效果。

---

## v1.3.1
> *2025/12/28*

### 🚀 優化
- **邏輯處理**: 優化筆記修改標題時的邏輯處理流程。

---

## v1.3.0
> *2025/12/28*

### ✨ 新增
- **WebGui**: 增加設置項，允許用戶控制 WebGui 的字體設置。

---

## v1.2.6
> *2025/12/27*

### 🚀 優化
- **WebGui**: 優化字體加載邏輯，避免字體加載導致的界面卡頓。

---

## v1.2.5
> *2025/12/27*

### ✨ 新增
- **客戶端**: 增加對客戶端名稱的記錄支持。

### 🚀 優化
- **清理邏輯**: 增加筆記重新命名後的同步清理邏輯。

---

## v1.2.4
> *2025/12/27*

### 🛠️ 修復
- **WebGui**: 修復歷史版本内容為空時導致的顯示 Bug。

---

## v1.2.3
> *2025/12/27*

### ✨ 新增
- **API**: 增加筆記歷史相關的接口和功能。

### 🚀 優化
- **數據庫**: 優化數據庫查詢效率。
- **WebGui**: 修改 WebGui 顯示字體並修復各類顯示 Bug。

### 🛠️ 修復
- **穩定性**: 修復高併發訪問時出現的問題。

---

## v1.2.2
> *2025/12/27*

### 🛠️ 修復
- **WebGui**: 修正筆記歷史為空時導致的頁面空白問題。

---

## v1.2.1
> *2025/12/27*

### ✨ 新增
- **API**: 增加筆記歷史相關接口和功能。

### 🚀 優化
- **數據庫**: 優化數據庫查詢效率。
- **穩定性**: 解決大量併發訪問時的穩定性問題。

---

## v1.0.4
> *2025/12/26*

### 🛠️ 修復
- **WebGui**: 修正 WebGui 頁面構建（Build）異常導致的空白顯示問題。

---

## v1.0.3
> *2025/12/25*

### 🛠️ 修復
- **WebGui**: 解決筆記標題過長導致的排版顯示問題。

---

## v1.0.2
> *2025/12/25*

### 🚀 優化
- **附件**: 優化附件上傳邏輯，顯著減少上傳時間。

### 🛠️ 修復
- **CI/CD**: 修正 GitHub Action 的更新限制問題。

---

## v1.0.1
> *2025/12/23*

### 🛠️ 修復
- **權限**: 修復部分系統在上傳時由於權限不足導致的問題。

---

## v1.0.0
> *2025/12/22*

### ✨ 新增
- **同步**: 新增配置文件同步相關功能及接口。

### 🚀 優化
- **脚本**: 優化顯示脚本的輸出。

### 🛠️ 修復
- **脚本**: 修正脚本控制運行失敗的問題。

---

## v0.11.5
> *2025/12/19*

### 🛠️ 修復
- **Docker**: 修正 Docker 鏡像無法執行的問題。

---

## v0.11.4
> *2025/12/18*

### ✨ 新增
- **鑒權**: 在驗證授權接口中增加下發版本信息的功能。

---

## v0.11.3
> *2025/12/16*

### ✨ 新增
- **清理**: 增加程序啟動時的自動清理任務以及 Session 自動清理邏輯。

### 🛠️ 修復
- **穩定性**: 修正高併發下由於連接關閉導致的異常退出問題。

---

## v0.11.2
> *2025/12/15*

### 🛠️ 修復
- **穩定性**: 修正併發下由於連接關閉導致的程序異常退出。

---

## v0.11.1
> *2025/12/14*

### ✨ 新增
- **架構**: 給消息增加前綴，方便後續業務功能擴容。

---

## v0.10.2
> *2025/12/12*

### ✨ 新增
- **設置**: 增加上傳下載分片設置項（默認 512KB）。

---

## v0.10.1
> *2025/12/12*

### ✨ 新增
- **功能**: 增加二進制文件下載功能。
- **功能**: 增加 WebSocket 分塊下載功能。
- **功能**: 增加版本控制管理。

---

## v0.9.6
> *2025/12/11*

- 初始版本（記錄開始）。
