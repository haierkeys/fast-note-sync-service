# 更新日誌 (CHANGELOG)

本專案的所有重大變更都將記錄在此文件中。

本專案遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/0.3.0/) 規範。

---

## v1.16.2
> *2026/02/14*

### 🚀 優化

- **WebGui**: 調整 WebGui 介面位置。
- **功能**: 新增伺服器資訊顯示。
- **性能**: 針對各類列表顯示高度過低的問題，採用零拷貝（Zero-copy）方式進行優化。
- **同步**: 優化筆記/附件同步邏輯。

---

## v1.16.1
> *2026/02/14*

### 🚀 優化

- **WebGui**: 調整 WebGui 介面位置。
- **功能**: 新增伺服器資訊顯示。

---

## v1.15.11
> *2026/02/14*

### 🚀 優化

- **WebGui**: 優化 WebGui 介面並增加 URL 支援。

---

## v1.15.10
> *2026/02/14*

### 🚀 優化

- **架構**: 調整服務工具集。
- **API**: 調整介面回應結構。

---

## v1.15.9
> *2026/02/14*

### ✨ 新功能

- **工具**: 在 fns 中增加 docs 及 ws 調試工具的存取入口。

---

## v1.15.8
> *2026/02/13*

### 🛠️ 修復

- **穩定性**: 修復時間處理相關的輕微 Bug。

---

## v1.15.7
> *2026/02/13*

### 🛠️ 修復

- **同步**: 修復離線刪除時，本地雜湊表未清理的問題。

---

## v1.15.6
> *2026/02/13*

### 🛠️ 修復

- **指令碼**: 修復 macOS 環境下 fns 捷徑指令碼的執行問題。
- **日誌**: 修正日誌輸出內容。

---

## v1.15.5
> *2026/02/12*

### 🚀 優化

- **CI/CD**: 調整 GitHub Action 使用 go mod 版本進行構建與發佈。

---

## v1.15.4
> *2026/02/12*

### ✨ 新功能

- **同步**: 新增筆記配置相關訊息清理功能。

---

## v1.15.3
> *2026/02/10*

### 🛠️ 修復

- **目錄**: 增加重複目錄的規避方案，並在啟動時增加重複目錄清理功能。

---

## v1.15.2
> *2026/02/09*

### 🚀 優化

- **資料庫**: DB 性能及結構優化，並進行批次格式化。

---

## v1.15.1
> *2026/02/07*

### ✨ 新功能

- **目錄**: 新增目錄（Folder）管理功能（含 Model 及相關邏輯）。
- **同步**: 修復潛在的資料競爭問題，優化筆記/附件重新命名功能。

---

## v1.14.1
> *2026/01/31*

### ✨ 新功能

- **回收站**: 附件管理支援回收站及批次恢復功能。

### 🛠️ 修復

- **穩定性**: 修復附件/配置文件更新時間與內容一致時資源未平滑產生的問題。

### 🚀 優化

- **API**: 採用零拷貝方式優化附件查詢/下載介面。
- **WebGui**: 優化各類列表顯示高度過低的問題。

---

## v1.14.0
> *2026/01/31*

### ✨ 新功能

- **回收站**: 附件管理新增回收站。
- **WebGui**: 新增伺服器資訊顯示。
- **同步**: 新增筆記及附件重新命名功能。

### 🛠️ 修復

- **穩定性**: 修復潛在的資料競爭問題。

---

## v1.13.0
> *2026/01/30*

### ✨ 新增
- **同步**: 新增附件、筆記、配置離線刪除同步功能。
- **同步**: 增量同步模式下增加自動下載缺失文件功能。

---

## v1.12.0
> *2026/01/29*

### 🚀 優化
- **語言**: 將所有代碼註釋及文檔統一翻譯/更新為中英雙語或英文。
- **API**: 優化項目返回信息的國際化支持。
- **穩定性**: 修正自動資源前綴問題。
- **API**: 新增 API 擴展：編輯操作、反連結 (Backlinks)、健康檢查。

---

## v1.11.3
> *2026/01/27*

### 🛠️ 修復
- **附件**: 修正附件下載請求超時（30s）導致報錯的問題，調整為可配置且默認 1 小時。

---

## v1.11.2
> *2026/01/27*

### ✨ 新增
- **WebGui**: 增加 Obsidian SSO 自動授權機制。

### 🚀 優化
- **WebGui**: 優化授權配置界面 UI。

---

## v1.11.1
> *2026/01/26*

### 🚀 優化
- **發佈**: 調整版本發佈流程。

---

## v1.11.0
> *2026/01/26*

### ✨ 新增
- **功能**: 新增版本檢測及版本信息獲取功能。

---

## v1.10.8
> *2026/01/26*

### ✨ 新增
- **API**: 新增附件狀態檢測接口。

---

## v1.10.7
> *2026/01/25*

### 🛠️ 修復
- **穩定性**: 修復由於上傳文件校驗一致性判斷引發的服務崩潰問題。

---

## v1.10.6
> *2026/01/24*

### ✨ 新增
- **WebGui**: 附件管理頁面增加分頁功能。

---

## v1.10.5
> *2026/01/23*

### 🛠️ 修復
- **回收站**: 修正從回收站和歷史版本中恢復筆記/版本的問題。

---

## v1.10.4
> *2026/01/23*

### 🛠️ 修復
- **附件**: 修復附件上傳過程中網絡斷開導致的異常，降低報錯等級。

---

## v1.10.3
> *2026/01/20*

### 🚀 優化
- **WebGui**: 取消筆記倉庫放大效果，改為選中陰影效果。

### 🛠️ 修復
- **WebGui**: 修復筆記倉庫名稱含特殊字符時無法訪問的 Bug。

---

## v1.10.2
> *2026/01/20*

### 🛠️ 修復
- **管理**: 修復新用戶無法註冊及無法關閉用戶註冊設置的 Bug。

---

## v1.10.1
> *2026/01/20*

### 🛠️ 修復
- **管理**: 修復新用戶無法註冊的問題。

---

## v1.10.0
> *2026/01/19*

### ✨ 新增
- **附件**: 增加附件管理相關功能。
- **鑑權**: 增加 Token 過期時間配置。
- **分享**: 增加分享功能相關接口。
- **文檔**: 增加 Swagger API 文檔。

### 🚀 優化
- **WebGui**: 調整 WebGui 部署路徑。
- **API**: 細化接口錯誤提示。

### 🛠️ 修復
- **WebGui**: 修正 WebGui 自動翻譯導致的提示問題。

---

## v1.9.1
> *2026/01/14*

### 🚀 優化
- **WebGui**: 增加藍色配色方案，優化編輯器顯示效果。

---

## v1.9.0
> *2026/01/14*

### ✨ 新增
- **WebGui**: 界面全新重構（由 @ZyphrZero 貢獻）。
- **WebGui**: 更換編輯器為 Vditor，支持富文本和 Markdown 即時渲染。
- **WebGui**: 支持自定義筆記搜索、列表字段排序及顏色主題。
- **WebGui**: 新增暗黑模式、在線版本檢測及回收站筆記恢復功能。
- **設置**: 新增歷史記錄保留版本數及保存延遲設置。

### 🚀 優化
- **安全**: 優化服務令牌加密混淆字符。

---

## v1.8.1
> *2026/01/12*

### 🔄 變更
- **架構**: 引入 DDD 分層架構（由 @ZyphrZero 貢獻），移除全局變量，實現依賴注入模式。

### 🚀 優化
- **同步**: 離線筆記合併優化，實現基於行級的衝突檢測與三方合併。
- **性能**: 新增 Worker Pool 和 Per-User Write Queue，解決 SQLite 併發鎖定問題。
- **WebSocket**: 優化 Context 生命周期管理，增強 TraceID 追蹤能力。

### 🛠️ 修復
- **邏輯**: 修復筆記重命名導致的筆記丟失和報錯問題。

---

## v1.7.3
> *2026/01/09*

### 🛠️ 修復
- **數據庫**: 增加數據庫創建失敗時的友好報錯提示。

---

## v1.7.2
> *2026/01/09*

### ✨ 新增
- **WebGui**: 增加配置設置功能及相關接口。
- **管理**: 增加管理員 ID 設置。

---

## v1.7.1
> *2026/01/09*

### ✨ 新增
- **同步**: 新增離線設備筆記編輯合併功能（需插件端 v1.7+ 開啟）。

---

## v1.6.3
> *2026/01/08*

### 🚀 優化
- **WebGui**: 優化筆記列表搜索功能。
- **WebGui**: 增加圖標顯示。
- **WebGui**: 筆記倉庫增加附件顯示和刷新按鈕。

### 🛠️ 修復
- **穩定性**: 修復併發查詢時可能出現的異常。

---

## v1.6.1
> *2026/01/07*

### 🚀 優化
- **性能**: 優化大筆記庫同步效率及數據處理（需插件端 v1.6+）。
- **緩存**: 為靜態內容增加瀏覽器緩存機制。

> [!CAUTION]
> 本版本涉及數據庫結構優化，建議刪除原服務端 `storage/database` 目錄下的 DB 文件，筆記修改歷史將重新生成。

---

## v1.5.4
> *2026/01/06*

### 🛠️ 修復
- **附件**: 修正上傳附件時偶爾出現的報錯問題。

---

## v1.5.3
> *2026/01/06*

### 🚀 優化
- **WebGui**: 對編輯功能進行延時加載，提升首頁加載速度。

---

## v1.5.2
> *2026/01/05*

### 🛠️ 修復
- **同步**: 修正同步任務進度顯示不準確的問題。

---

## v1.5.1
> *2026/01/04*

### 🛠️ 修復
- **邏輯**: 修正筆記重命名後無法正常刪除的問題。
- **穩定性**: 修正大規模筆記同步時導致 WebSocket 連接重置的問題。
- **多語言**: 修復 WebGui 接口語言錯誤。

---

## v1.5.0
> *2026/01/04*

### ✨ 新增
- **回收站**: 增加筆記回收站功能。
- **WebGui**: 增加用戶狀態檢測。
- **WebGui**: 註冊頁面增加關閉註冊的檢測。
- **WebGui**: 增加操作確認的鍵盤快捷鍵支持。

### 🚀 優化
- **WebGui**: 優化筆記編輯頁面的使用體驗。
- **數據庫**: 優化並解決數據庫併發訪問問題。

### 🛠️ 修復
- **腳本**: 修正快捷腳本可能覆蓋配置文件的問題。

---

## v1.4.7
> *2026/01/03*

### 🛠️ 修復
- **數據庫**: 嘗試解決 SQLite 併發問題，修正內部錯誤碼。

---

## v1.4.6
> *2026/01/03*

### 🛠️ 修復
- **Docker**: 修正 Docker 環境下運行報 `temp` 目錄不存在的問題。

---

## v1.4.5
> *2026/01/03*

### 🛠️ 修復
- **同步**: 修正首次同步或全量同步時無法同步附件的問題（需插件端 v1.5.14+）。

---

## v1.4.4
> *2026/01/02*

### 🛠️ 修復
- **訪問**: 修正 Emoji 標題無法訪問的問題。

### ✨ 新增
- **文檔**: 增加幫助文件。

---

## v1.4.3
> *2026/01/02*

### 🔄 變更
- **倉庫**: 筆記倉庫刪除操作改為軟刪除。

---

## v1.4.2
> *2026/01/01*

### ✨ 新增
- **WebGui**: 筆記刪除操作增加紅色的二次確認彈窗，防止誤刪。

---

## v1.4.1
> *2025/12/31*

### 🚀 優化
- **API**: 筆記資源（圖片等）下載接口增加 ETag 瀏覽器緩存機制，提升加載速度。

---

## v1.4.0
> *2025/12/31*

### ✨ 新增
- **WebGui**: 增加最大化按鈕，提升全屏編輯體驗。
- **WebGui**: 筆記查看頁面增加對 Obsidian 內嵌圖片、PDF 以及其他附件的正常顯示支持。
- **API**: 增加資源下載接口。

---

## v1.3.8
> *2025/12/31*

### 🚀 優化
- **服務端**: 為筆記建立內容哈希版本庫，方便後續進行溯源、對比和合併操作。

---

## v1.3.7
> *2025/12/30*

### 🛠️ 修復
- **穩定性**: 為任務和升級腳本增加宕機恢復機制，避免單個任務報錯導致整個服務崩潰。
- **穩定性**: 修復原有各層級出現的空指針（nil pointer）導致的 Panic 問題。

---

## v1.3.6
> *2025/12/30*

### 🛠️ 修復
- **任務管理**: 修復任務管理器中存在的報錯問題。

---

## v1.3.5
> *2025/12/30*

### 🚀 優化
- **WebGui**: 優化筆記查看頁面的顯示效果。
- **腳本**: 優化一鍵安裝/管理腳本。

---

## v1.3.4
> *2025/12/30*

### 🛠️ 修復
- **同步**: 修復同步命令處理錯誤導致的文件錯誤同步創建到所有客戶端的問題。
- **腳本**: 修復一鍵腳本在 `Ctrl+C` 時導致已啟動的服務被同步關閉的問題。

---

## v1.3.3
> *2025/12/29*

### 🛠️ 修復
- **同步**: 解決單用戶多筆記倉庫時可能出現的更新混淆問題。

---

## v1.3.2
> *2025/12/28*

### ✨ 新增
- **多語言**: 增加對多語言環境的支持。

### 🚀 優化
- **WebGui**: 優化筆記歷史差異對比的顯示效果。

---

## v1.3.1
> *2025/12/28*

### 🚀 優化
- **邏輯處理**: 優化筆記修改標題時的邏輯處理流程。

---

## v1.3.0
> *2025/12/28*

### ✨ 新增
- **WebGui**: 增加設置項，允許用戶控制 WebGui 的字體設置。

---

## v1.2.6
> *2025/12/27*

### 🚀 優化
- **WebGui**: 優化字體加載邏輯，避免字體加載導致的界面卡頓。

---

## v1.2.5
> *2025/12/27*

### ✨ 新增
- **客戶端**: 增加對客戶端名稱的記錄支持。

### 🚀 優化
- **清理邏輯**: 增加筆記重命名後的同步清理邏輯。

---

## v1.2.4
> *2025/12/27*

### 🛠️ 修復
- **WebGui**: 修復歷史版本內容為空時導致的顯示 Bug。

---

## v1.2.3
> *2025/12/27*

### ✨ 新增
- **API**: 增加筆記歷史相關的接口和功能。

### 🚀 優化
- **數據庫**: 優化數據庫查詢效率。
- **WebGui**: 修改 WebGui 顯示字體並修復各類顯示 Bug。

### 🛠️ 修復
- **穩定性**: 修復高併發訪問時出現的問題。

---

## v1.2.2
> *2025/12/27*

### 🛠️ 修復
- **WebGui**: 修正筆記歷史為空時導致的頁面空白問題。

---

## v1.2.1
> *2025/12/27*

### ✨ 新增
- **API**: 增加筆記歷史相關接口和功能。

### 🚀 優化
- **數據庫**: 優化數據庫查詢效率。
- **穩定性**: 解決大量併發訪問時的穩定性問題。

---

## v1.0.4
> *2025/12/26*

### 🛠️ 修復
- **WebGui**: 修正 WebGui 頁面構建（Build）異常導致的空白顯示問題。

---

## v1.0.3
> *2025/12/25*

### 🛠️ 修復
- **WebGui**: 解決筆記標題過長導致的排版顯示問題。

---

## v1.0.2
> *2025/12/25*

### 🚀 優化
- **附件**: 優化附件上傳邏輯，顯著減少上傳時間。

### 🛠️ 修復
- **CI/CD**: 修正 GitHub Action 的更新限制問題。

---

## v1.0.1
> *2025/12/23*

### 🛠️ 修復
- **權限**: 修復部分系統在上傳時由於權限不足導致的問題。

---

## v1.0.0
> *2025/12/22*

### ✨ 新增
- **同步**: 新增配置文件同步相關功能及接口。

### 🚀 優化
- **腳本**: 優化顯示腳本的輸出。

### 🛠️ 修復
- **腳本**: 修正腳本控制運行失敗的問題。

---

## v0.11.5
> *2025/12/19*

### 🛠️ 修復
- **Docker**: 修正 Docker 鏡像無法執行的問題。

---

## v0.11.4
> *2025/12/18*

### ✨ 新增
- **鑑權**: 在驗證授權接口中增加下發版本信息的功能。

---

## v0.11.3
> *2025/12/16*

### ✨ 新增
- **清理**: 增加程序啟動時的自動清理任務以及 Session 自動清理邏輯。

### 🛠️ 修復
- **穩定性**: 修正高併發下由於連接關閉導致的異常退出問題。

---

## v0.11.2
> *2025/12/15*

### 🛠️ 修復
- **穩定性**: 修正併發下由於連接關閉導致的程序異常退出。

---

## v0.11.1
> *2025/12/14*

### ✨ 新增
- **架構**: 給消息增加前綴，方便後續業務功能擴容。

---

## v0.10.2
> *2025/12/12*

### ✨ 新增
- **設置**: 增加上傳下載分片設置項（默認 512KB）。

---

## v0.10.1
> *2025/12/12*

### ✨ 新增
- **功能**: 增加二進制文件下載功能。
- **功能**: 增加 WebSocket 分塊下載功能。
- **功能**: 增加版本控制管理。

---

## v0.9.6
> *2025/12/11*

- 初始版本（記錄開始）。
