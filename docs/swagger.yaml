basePath: /
definitions:
  api_router.HealthResponse:
    properties:
      database:
        description: '"connected" or "error" // "connected" 或 "error"'
        type: string
      status:
        description: '"healthy" or "unhealthy" // "healthy" 或 "unhealthy"'
        type: string
      uptime:
        description: Uptime (seconds) // 运行时间（秒）
        type: number
      version:
        description: Service version number // 服务版本号
        type: string
    type: object
  api_router.webGUIAdminConfig:
    properties:
      adminUid:
        description: Admin UID // 管理员 UID
        type: integer
      authTokenKey:
        description: Auth token key // 认证 Token 密钥
        type: string
      defaultApiFolder:
        description: Default API folder // 默认 API 目录
        type: string
      fileChunkSize:
        description: File chunk size // 文件分块大小
        type: string
      fontSet:
        description: Font set // 字体设置
        type: string
      historyKeepVersions:
        description: History versions to keep // 历史版本保留数
        type: integer
      historySaveDelay:
        description: History save delay // 历史保存延迟
        type: string
      registerIsEnable:
        description: Registration enablement // 是否开启注册
        type: boolean
      shareTokenExpiry:
        description: Share token expiry // 分享 Token 有效期
        type: string
      shareTokenKey:
        description: Share token key // 分享 Token 密钥
        type: string
      softDeleteRetentionTime:
        description: Soft delete retention time // 软删除保留时间
        type: string
      tokenExpiry:
        description: Token expiry // Token 有效期
        type: string
      uploadSessionTimeout:
        description: Upload session timeout // 上传会话超时时间
        type: string
    type: object
  api_router.webGUIConfig:
    properties:
      adminUid:
        description: Admin UID // 管理员 UID
        type: integer
      fontSet:
        description: Font set // 字体设置
        type: string
      registerIsEnable:
        description: Registration enablement // 是否开启注册
        type: boolean
    type: object
  app.ListRes:
    properties:
      list:
        description: Data list // 数据清单
      pager:
        allOf:
        - $ref: '#/definitions/app.Pager'
        description: Pagination info // 翻页信息
    type: object
  app.Pager:
    properties:
      page:
        description: Page number // 页码
        type: integer
      pageSize:
        description: Page size // 每页数量
        type: integer
      totalRows:
        description: Total rows // 总行数
        type: integer
    type: object
  app.Res:
    properties:
      code:
        type: integer
      context: {}
      data: {}
      details: {}
      message: {}
      status:
        type: boolean
      vault: {}
    type: object
  diffmatchpatch.Diff:
    properties:
      text:
        type: string
      type:
        $ref: '#/definitions/diffmatchpatch.Operation'
    type: object
  diffmatchpatch.Operation:
    enum:
    - -1
    - 1
    - 0
    format: int32
    type: integer
    x-enum-varnames:
    - DiffDelete
    - DiffInsert
    - DiffEqual
  dto.FileDTO:
    properties:
      contentHash:
        type: string
      createdAt:
        type: string
      ctime:
        type: integer
      lastTime:
        type: integer
      mtime:
        type: integer
      path:
        type: string
      pathHash:
        type: string
      size:
        type: integer
      updatedAt:
        type: string
    type: object
  dto.FileRestoreRequest:
    properties:
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderCreateRequest:
    properties:
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderDTO:
    properties:
      createdAt:
        type: string
      ctime:
        type: integer
      lastTime:
        type: integer
      mtime:
        type: integer
      path:
        type: string
      pathHash:
        type: string
      updatedAt:
        type: string
    type: object
  dto.FolderDeleteRequest:
    properties:
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderTreeNode:
    properties:
      children:
        items:
          $ref: '#/definitions/dto.FolderTreeNode'
        type: array
      fileCount:
        type: integer
      name:
        type: string
      noteCount:
        type: integer
      path:
        type: string
    type: object
  dto.FolderTreeResponse:
    properties:
      folders:
        items:
          $ref: '#/definitions/dto.FolderTreeNode'
        type: array
      rootFileCount:
        type: integer
      rootNoteCount:
        type: integer
    type: object
  dto.NoteAppendRequest:
    properties:
      content:
        type: string
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - content
    - path
    - vault
    type: object
  dto.NoteDTO:
    properties:
      content:
        type: string
      contentHash:
        type: string
      createdAt:
        type: string
      ctime:
        type: integer
      lastTime:
        type: integer
      mtime:
        type: integer
      path:
        type: string
      pathHash:
        type: string
      size:
        type: integer
      updatedAt:
        type: string
      version:
        type: integer
    type: object
  dto.NoteHistoryDTO:
    properties:
      clientName:
        type: string
      content:
        type: string
      contentHash:
        type: string
      createdAt:
        type: string
      diffs:
        items:
          $ref: '#/definitions/diffmatchpatch.Diff'
        type: array
      id:
        type: integer
      noteId:
        type: integer
      path:
        type: string
      vaultId:
        type: integer
      version:
        type: integer
    type: object
  dto.NoteHistoryRestoreRequest:
    properties:
      historyId:
        type: integer
      vault:
        type: string
    required:
    - historyId
    - vault
    type: object
  dto.NoteLinkItem:
    properties:
      context:
        description: snippet around link
        type: string
      isEmbed:
        description: true if embed (![[...]]) vs regular link ([[...]])
        type: boolean
      linkText:
        type: string
      path:
        type: string
    type: object
  dto.NoteModifyOrCreateRequest:
    properties:
      baseHash:
        type: string
      baseHashMissing:
        description: Marks if baseHash is unavailable
        type: boolean
      content:
        type: string
      contentHash:
        type: string
      createOnly:
        description: If true, fail if note already exists
        type: boolean
      ctime:
        type: integer
      mtime:
        type: integer
      oldPath:
        type: string
      oldPathHash:
        type: string
      path:
        type: string
      pathHash:
        type: string
      srcPath:
        type: string
      srcPathHash:
        type: string
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.NoteMoveRequest:
    properties:
      destination:
        type: string
      overwrite:
        type: boolean
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - destination
    - path
    - vault
    type: object
  dto.NoteNoContentDTO:
    properties:
      createdAt:
        type: string
      ctime:
        type: integer
      lastTime:
        type: integer
      mtime:
        type: integer
      path:
        type: string
      pathHash:
        type: string
      size:
        type: integer
      updatedAt:
        type: string
      version:
        type: integer
    type: object
  dto.NotePatchFrontmatterRequest:
    properties:
      path:
        type: string
      pathHash:
        type: string
      remove:
        items:
          type: string
        type: array
      updates:
        additionalProperties: true
        type: object
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.NotePrependRequest:
    properties:
      content:
        type: string
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - content
    - path
    - vault
    type: object
  dto.NoteReplaceRequest:
    properties:
      all:
        type: boolean
      failIfNoMatch:
        type: boolean
      find:
        type: string
      path:
        type: string
      pathHash:
        type: string
      regex:
        type: boolean
      replace:
        type: string
      vault:
        type: string
    required:
    - find
    - path
    - vault
    type: object
  dto.NoteReplaceResponse:
    properties:
      matchCount:
        type: integer
      note:
        $ref: '#/definitions/dto.NoteDTO'
    type: object
  dto.NoteRestoreRequest:
    properties:
      path:
        type: string
      pathHash:
        type: string
      vault:
        type: string
    required:
    - path
    - vault
    type: object
  dto.NoteWithFileLinksResponse:
    properties:
      content:
        type: string
      contentHash:
        type: string
      createdAt: {}
      ctime:
        type: integer
      fileLinks:
        additionalProperties:
          type: string
        type: object
      lastTime:
        type: integer
      mtime:
        type: integer
      path:
        type: string
      pathHash:
        type: string
      updatedAt: {}
      version:
        type: integer
    type: object
  dto.ShareCreateRequest:
    properties:
      path:
        description: Resource path
        type: string
      path_hash:
        description: Resource path Hash
        type: string
      vault:
        description: Vault name
        example: defaultVault
        type: string
    required:
    - path
    - path_hash
    - vault
    type: object
  dto.ShareCreateResponse:
    properties:
      expires_at:
        description: Expiration time
        type: string
      id:
        description: ID of the note or file table (primary resource ID)
        type: integer
      token:
        description: Share Token
        type: string
      type:
        description: 'Resource type: note or file'
        type: string
    type: object
  dto.UserChangePasswordRequest:
    properties:
      confirmPassword:
        type: string
      oldPassword:
        type: string
      password:
        type: string
    required:
    - confirmPassword
    - oldPassword
    - password
    type: object
  dto.UserCreateRequest:
    properties:
      confirmPassword:
        type: string
      email:
        type: string
      password:
        type: string
      username:
        type: string
    required:
    - confirmPassword
    - email
    - password
    - username
    type: object
  dto.UserDTO:
    properties:
      avatar:
        type: string
      createdAt:
        type: string
      email:
        type: string
      token:
        type: string
      uid:
        type: integer
      updatedAt:
        type: string
      username:
        type: string
    type: object
  dto.UserLoginRequest:
    properties:
      credentials:
        type: string
      password:
        type: string
    required:
    - credentials
    - password
    type: object
  dto.VaultDTO:
    properties:
      createdAt:
        type: string
      fileCount:
        type: integer
      fileSize:
        type: integer
      noteCount:
        type: integer
      noteSize:
        type: integer
      size:
        type: integer
      updatedAt:
        type: string
      vault:
        type: string
    type: object
  dto.VaultPostRequest:
    properties:
      id:
        type: integer
      vault:
        type: string
    required:
    - vault
    type: object
host: localhost:9000
info:
  contact:
    email: haierkeys@gmail.com
    name: Haierkeys
    url: https://github.com/haierkeys
  description: This is the Fast Note Sync Service HTTP API.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Fast Note Sync Service HTTP API
  version: "1.0"
paths:
  /api/admin/config:
    get:
      description: Get full system configuration information, requires admin privileges
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIAdminConfig'
              type: object
        "403":
          description: Insufficient privileges
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Get full admin config
      tags:
      - Config
    post:
      consumes:
      - application/json
      description: Modify full system configuration information, requires admin privileges
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Config Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/api_router.webGUIAdminConfig'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIAdminConfig'
              type: object
        "403":
          description: Insufficient privileges
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Update admin config
      tags:
      - Config
  /api/file:
    delete:
      description: Permanently delete a specific attachment record and its physical
        file
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        required: true
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Delete attachment
      tags:
      - File
    get:
      description: Get raw binary data of an attachment by path, supports strong cache
        control
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Success
          schema:
            type: file
      security:
      - UserAuthToken: []
      summary: Get attachment content
      tags:
      - File
  /api/file/info:
    get:
      description: Get attachment metadata (FileDTO) by path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get attachment info
      tags:
      - File
  /api/file/restore:
    put:
      description: Restore deleted attachment from trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FileRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore attachment
      tags:
      - File
  /api/files:
    get:
      description: Get attachment list for current user with pagination, search, filter,
        and sort support
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: keyword
        type: string
      - description: 'Sorting field: mtime(default), ctime, path'
        in: query
        name: sortBy
        type: string
      - description: 'Sorting order: desc(default), asc'
        in: query
        name: sortOrder
        type: string
      - in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.FileDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get file list
      tags:
      - File
  /api/folder:
    delete:
      consumes:
      - application/json
      description: Soft delete a folder by path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Delete Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FolderDeleteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Delete folder
      tags:
      - Folder
    get:
      description: Get folder info for current user by path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder info
      tags:
      - Folder
    post:
      consumes:
      - application/json
      description: Create a new folder or restore a deleted one by path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Create Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FolderCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create folder
      tags:
      - Folder
  /api/folder/files:
    get:
      description: List non-deleted files in a specific folder with pagination and
        sorting
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: sortBy
        type: string
      - in: query
        name: sortOrder
        type: string
      - in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.FileDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: List files in folder
      tags:
      - Folder
  /api/folder/notes:
    get:
      description: List non-deleted notes in a specific folder with pagination and
        sorting
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: sortBy
        type: string
      - in: query
        name: sortOrder
        type: string
      - in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: List notes in folder
      tags:
      - Folder
  /api/folder/tree:
    get:
      description: Get the complete folder tree structure for a vault
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: 0 or negative = unlimited
        in: query
        name: depth
        type: integer
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderTreeResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder tree
      tags:
      - Folder
  /api/folders:
    get:
      description: Get folder list for current user by parent path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.FolderDTO'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder list
      tags:
      - Folder
  /api/health:
    get:
      description: Check service health status, including database connection
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_router.HealthResponse'
      summary: Health check
      tags:
      - System
  /api/note:
    delete:
      description: Move note to trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Delete note
      tags:
      - Note
    get:
      description: Get specific note content and metadata by path or path hash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteWithFileLinksResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Get note details
      tags:
      - Note
    post:
      consumes:
      - application/json
      description: Handle note creation, modification, or renaming (identified by
        path change)
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Note Content
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteModifyOrCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create or update note
      tags:
      - Note
  /api/note/append:
    post:
      consumes:
      - application/json
      description: Append content to the end of a note
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Append Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteAppendRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Append content to note
      tags:
      - Note
  /api/note/backlinks:
    get:
      description: Get all other notes that link to the specified note
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.NoteLinkItem'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get backlinks
      tags:
      - Note
  /api/note/frontmatter:
    patch:
      consumes:
      - application/json
      description: Update or delete note frontmatter fields
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Frontmatter Modification Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NotePatchFrontmatterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Modify note frontmatter
      tags:
      - Note
  /api/note/histories:
    get:
      description: Get all history records for a specific note with pagination
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteHistoryDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get note history list
      tags:
      - Note History
  /api/note/history:
    get:
      description: Get specific note history content by history record ID
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: History Record ID
        format: int64
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteHistoryDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get note history details
      tags:
      - Note History
  /api/note/history/restore:
    put:
      consumes:
      - application/json
      description: Restore note content to a specific history version
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteHistoryRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore note from history
      tags:
      - Note History
  /api/note/move:
    post:
      consumes:
      - application/json
      description: Move a note to a new path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Move Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteMoveRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Move note
      tags:
      - Note
  /api/note/outlinks:
    get:
      description: Get other notes that the specified note links to
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: path
        required: true
        type: string
      - in: query
        name: pathHash
        type: string
      - in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.NoteLinkItem'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get outgoing links
      tags:
      - Note
  /api/note/prepend:
    post:
      consumes:
      - application/json
      description: Insert content at the beginning of a note (after frontmatter)
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Prepend Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NotePrependRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Prepend content to note
      tags:
      - Note
  /api/note/replace:
    post:
      consumes:
      - application/json
      description: Perform find and replace operation in a note, supporting regular
        expressions
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Find and Replace Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteReplaceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteReplaceResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Find and replace in note
      tags:
      - Note
  /api/note/restore:
    put:
      description: Restore deleted note from trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore note
      tags:
      - Note
  /api/notes:
    get:
      description: Get note list for current user with pagination
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        name: isRecycle
        type: boolean
      - in: query
        name: keyword
        type: string
      - description: Whether to search content
        in: query
        name: searchContent
        type: boolean
      - description: 'Search mode: path(default), content, regex'
        in: query
        name: searchMode
        type: string
      - description: 'Sorting field: mtime(default), ctime, path'
        in: query
        name: sortBy
        type: string
      - description: 'Sorting order: desc(default), asc'
        in: query
        name: sortOrder
        type: string
      - in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteNoContentDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get note list
      tags:
      - Note
  /api/share:
    post:
      consumes:
      - application/json
      description: Create a share token for a specific note or attachment, automatically
        resolve attachment references and authorize
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Share Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.ShareCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.ShareCreateResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Create resource share
      tags:
      - Share
  /api/share/file:
    get:
      description: Get raw binary data of a specific attachment via share token
      parameters:
      - description: Auth Token
        in: header
        name: Share-Token
        required: true
        type: string
      - description: Resource ID
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Success
          schema:
            type: file
      security:
      - ShareAuthToken: []
      summary: Get shared attachment content
      tags:
      - Share
  /api/share/note:
    get:
      description: Get specific note content (restricted read-only access) via share
        token
      parameters:
      - description: Auth Token
        in: header
        name: Share-Token
        required: true
        type: string
      - description: Resource ID
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - ShareAuthToken: []
      summary: Get shared note details
      tags:
      - Share
  /api/user/change_password:
    post:
      consumes:
      - application/json
      description: Handle password change request for current user, validate old password
        and update new password
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Change Password Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Change user password
      tags:
      - User
  /api/user/info:
    get:
      consumes:
      - application/json
      description: Handle request to get current user info
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Get user info
      tags:
      - User
  /api/user/login:
    post:
      consumes:
      - application/json
      description: Handle user login HTTP request, validate parameters and return
        auth token
      parameters:
      - description: Login Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserLoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "400":
          description: Invalid Parameters
          schema:
            $ref: '#/definitions/app.Res'
      summary: User login
      tags:
      - User
  /api/user/register:
    post:
      consumes:
      - application/json
      description: Handle user registration HTTP request, validate parameters and
        call UserService
      parameters:
      - description: Register Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "400":
          description: Invalid Parameters
          schema:
            $ref: '#/definitions/app.Res'
      summary: User registration
      tags:
      - User
  /api/vault:
    delete:
      description: Permanently delete a specific note vault and all associated notes
        and attachments
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - in: query
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Delete vault
      tags:
      - Vault
    get:
      description: Get all note vaults for current user
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.VaultDTO'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get vault list
      tags:
      - Vault
    post:
      consumes:
      - application/json
      description: Be used to create a new vault or update an existing vault configuration
        based on the ID in the request parameters
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Vault Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.VaultPostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.VaultDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create or update vault
      tags:
      - Vault
  /api/vault/get:
    get:
      description: Get specific vault configuration details by vault ID
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Vault ID
        format: int64
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.VaultDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get vault details
      tags:
      - Vault
  /api/version:
    get:
      description: Get current server software version, Git tag, and build time
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  additionalProperties:
                    type: string
                  type: object
              type: object
      summary: Get server version info
      tags:
      - System
  /api/webgui/config:
    get:
      description: Get non-sensitive configuration required for frontend display,
        such as font settings, registration status, etc.
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIConfig'
              type: object
      summary: Get WebGUI basic config
      tags:
      - Config
securityDefinitions:
  ShareAuthToken:
    in: header
    name: Share-Token
    type: apiKey
  UserAuthToken:
    in: header
    name: token
    type: apiKey
swagger: "2.0"
