basePath: /
definitions:
  api_router.CPUInfo:
    properties:
      loadAvg:
        allOf:
        - $ref: '#/definitions/api_router.LoadInfo'
        description: Load average // 平均负载
      logicalCores:
        description: Logical cores // 逻辑核心数
        type: integer
      modelName:
        description: Model name // 型号
        type: string
      percent:
        description: Usage percentage per core // 每个核心的使用率
        items:
          type: number
        type: array
      physicalCores:
        description: Physical cores // 物理核心数
        type: integer
    type: object
  api_router.HealthResponse:
    properties:
      database:
        description: '"connected" or "error" // "connected" 或 "error"'
        type: string
      status:
        description: '"healthy" or "unhealthy" // "healthy" 或 "unhealthy"'
        type: string
      uptime:
        description: Uptime (seconds) // 运行时间（秒）
        type: number
      version:
        description: Service version number // 服务版本号
        type: string
    type: object
  api_router.HostInfo:
    properties:
      arch:
        description: Architecture // 架构
        type: string
      currentTime:
        description: Current system time // 当前系统时间
        type: string
      hostname:
        description: Hostname // 主机名
        type: string
      kernelVersion:
        description: Kernel version // 内核版本
        type: string
      os:
        description: Operating system // 操作系统
        type: string
      osPretty:
        description: Detailed OS name // 详细操作系统名称
        type: string
      platform:
        description: Platform name // 平台
        type: string
      timezone:
        description: Time zone name // 时区名称
        type: string
      timezoneOffset:
        description: Time zone offset in seconds // 时区偏移（秒）
        type: integer
      uptime:
        description: System uptime // 系统运行时间
        type: integer
    type: object
  api_router.LoadInfo:
    properties:
      load1:
        type: number
      load5:
        type: number
      load15:
        type: number
    type: object
  api_router.MemoryInfo:
    properties:
      available:
        description: Available memory // 可用内存
        type: integer
      swapTotal:
        description: Total swap space // 交换区总量
        type: integer
      swapUsed:
        description: Used swap space // 交换区已用
        type: integer
      swapUsedPercent:
        description: Swap usage percentage // 交换区使用率
        type: number
      total:
        description: Total physical memory // 系统总内存
        type: integer
      used:
        description: Used memory // 已用内存
        type: integer
      usedPercent:
        description: Memory usage percentage // 内存使用率
        type: number
    type: object
  api_router.ProcessInfo:
    properties:
      cpuPercent:
        description: CPU Usage percentage
        type: number
      memoryPercent:
        description: Memory Usage percentage
        type: number
      name:
        description: Process Name
        type: string
      pid:
        description: Process ID
        type: integer
      ppid:
        description: Parent Process ID
        type: integer
    type: object
  api_router.RuntimeInfo:
    properties:
      heapReleased:
        description: Memory released to OS (bytes) // 释放回操作系统的内存（字节）
        type: integer
      memAlloc:
        description: Allocated memory (bytes) // 已分配内存（字节）
        type: integer
      memSys:
        description: Memory obtained from system (bytes) // 从系统获取的内存（字节）
        type: integer
      memTotal:
        description: Total memory allocated (bytes) // 累计分配内存（字节）
        type: integer
      numGc:
        description: Number of completed GC cycles // GC 次数
        type: integer
      numGoroutine:
        description: Number of goroutines // Goroutine 数量
        type: integer
    type: object
  api_router.SystemInfo:
    properties:
      cpu:
        allOf:
        - $ref: '#/definitions/api_router.CPUInfo'
        description: CPU information // CPU 信息
      host:
        allOf:
        - $ref: '#/definitions/api_router.HostInfo'
        description: Host information // 主机信息
      memory:
        allOf:
        - $ref: '#/definitions/api_router.MemoryInfo'
        description: Memory information // 内存信息
      process:
        allOf:
        - $ref: '#/definitions/api_router.ProcessInfo'
        description: Process information // 进程信息
      runtimeStatus:
        allOf:
        - $ref: '#/definitions/api_router.RuntimeInfo'
        description: Go runtime status // Go 运行时状态
      startTime:
        description: Start time // 启动时间
        type: string
      uptime:
        description: Uptime (seconds) // 运行时间（秒）
        type: number
    type: object
  api_router.webGUIAdminConfig:
    properties:
      adminUid:
        description: Admin UID // 管理员 UID
        type: integer
      authTokenKey:
        description: Auth token key // 认证 Token 密钥
        type: string
      defaultApiFolder:
        description: Default API folder // 默认 API 目录
        type: string
      fileChunkSize:
        description: File chunk size // 文件分块大小
        type: string
      fontSet:
        description: Font set // 字体设置
        type: string
      historyKeepVersions:
        description: History versions to keep // 历史版本保留数
        type: integer
      historySaveDelay:
        description: History save delay // 历史保存延迟
        type: string
      registerIsEnable:
        description: Registration enablement // 是否开启注册
        type: boolean
      shareTokenExpiry:
        description: Share token expiry // 分享 Token 有效期
        type: string
      shareTokenKey:
        description: Share token key // 分享 Token 密钥
        type: string
      softDeleteRetentionTime:
        description: Soft delete retention time // 软删除保留时间
        type: string
      tokenExpiry:
        description: Token expiry // Token 有效期
        type: string
      uploadSessionTimeout:
        description: Upload session timeout // 上传会话超时时间
        type: string
    type: object
  api_router.webGUIConfig:
    properties:
      adminUid:
        description: Admin UID // 管理员 UID
        type: integer
      fontSet:
        description: Font set // 字体设置
        type: string
      registerIsEnable:
        description: Registration enablement // 是否开启注册
        type: boolean
    type: object
  app.ListRes:
    properties:
      list:
        description: Data list // 数据清单
      pager:
        allOf:
        - $ref: '#/definitions/app.Pager'
        description: Pagination info // 翻页信息
    type: object
  app.Pager:
    properties:
      page:
        description: Page number // 页码
        type: integer
      pageSize:
        description: Page size // 每页数量
        type: integer
      totalRows:
        description: Total rows // 总行数
        type: integer
    type: object
  app.Res:
    properties:
      code:
        type: integer
      context: {}
      data: {}
      details: {}
      message: {}
      status:
        type: boolean
      vault: {}
    type: object
  diffmatchpatch.Diff:
    properties:
      text:
        type: string
      type:
        $ref: '#/definitions/diffmatchpatch.Operation'
    type: object
  diffmatchpatch.Operation:
    enum:
    - -1
    - 1
    - 0
    format: int32
    type: integer
    x-enum-varnames:
    - DiffDelete
    - DiffInsert
    - DiffEqual
  dto.FileDTO:
    properties:
      contentHash:
        description: Content hash // 内容哈希
        type: string
      createdAt:
        description: Created at time // 创建时间
        type: string
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      lastTime:
        description: Updated timestamp // 更新时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      path:
        description: File path // 文件路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      size:
        description: File size // 文件大小
        type: integer
      updatedAt:
        description: Updated at time // 更新时间
        type: string
    type: object
  dto.FileRestoreRequest:
    properties:
      path:
        description: File path // 文件路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderCreateRequest:
    properties:
      path:
        description: Folder path // 文件夹路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderDTO:
    properties:
      createdAt:
        description: Created at time // 创建时间
        type: string
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      lastTime:
        description: Record update timestamp // 记录更新时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      path:
        description: Folder path // 文件夹路径
        type: string
      pathHash:
        description: Path hash // 路径哈希值
        type: string
      updatedAt:
        description: Updated at time // 更新时间
        type: string
    type: object
  dto.FolderDeleteRequest:
    properties:
      path:
        description: Folder path // 文件夹路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.FolderTreeNode:
    properties:
      children:
        description: Child nodes // 子节点
        items:
          $ref: '#/definitions/dto.FolderTreeNode'
        type: array
      fileCount:
        description: File count // 文件数量
        type: integer
      name:
        description: Node name // 节点名称
        type: string
      noteCount:
        description: Note count // 笔记数量
        type: integer
      path:
        description: Node path // 节点路径
        type: string
    type: object
  dto.FolderTreeResponse:
    properties:
      folders:
        description: Folder tree // 文件夹树
        items:
          $ref: '#/definitions/dto.FolderTreeNode'
        type: array
      rootFileCount:
        description: File count in root // 根目录中的文件数量
        type: integer
      rootNoteCount:
        description: Note count in root // 根目录中的笔记数量
        type: integer
    type: object
  dto.NoteAppendRequest:
    properties:
      content:
        description: Content to append // 追加内容
        type: string
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - content
    - path
    - vault
    type: object
  dto.NoteDTO:
    properties:
      content:
        description: Note content // 笔记内容
        type: string
      contentHash:
        description: Content hash // 内容哈希
        type: string
      createdAt:
        description: Created at time // 创建时间
        type: string
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      lastTime:
        description: Record update timestamp // 记录更新时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      size:
        description: Note size // 笔记大小
        type: integer
      updatedAt:
        description: Updated at time // 更新时间
        type: string
      version:
        description: Version number // 版本号
        type: integer
    type: object
  dto.NoteHistoryDTO:
    properties:
      clientName:
        description: Client that made changes // 产生变更的客户端
        type: string
      content:
        description: Full historical content // 完整历史内容
        type: string
      contentHash:
        description: Content hash // 内容哈希
        type: string
      createdAt:
        description: Creation time of this version // 此版本的创建时间
        type: string
      diffs:
        description: Text differences // 文本差异内容
        items:
          $ref: '#/definitions/diffmatchpatch.Diff'
        type: array
      id:
        description: History entry ID // 历史项 ID
        type: integer
      noteId:
        description: Associated note ID // 笔记 ID
        type: integer
      path:
        description: Note path at that time // 当时的笔记路径
        type: string
      vaultId:
        description: Associated vault ID // 保险库 ID
        type: integer
      version:
        description: Historical version number // 历史版本号
        type: integer
    type: object
  dto.NoteHistoryRestoreRequest:
    properties:
      historyId:
        description: History version ID // 历史版本 ID
        type: integer
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - historyId
    - vault
    type: object
  dto.NoteLinkItem:
    properties:
      context:
        description: Text context around link // 链接文本上下文
        type: string
      isEmbed:
        description: Is it an embed (![[...]]) // 是否为嵌入
        type: boolean
      linkText:
        description: Raw link text (optional) // 原始链接文本（可选）
        type: string
      path:
        description: Target path // 目标路径
        type: string
    type: object
  dto.NoteModifyOrCreateRequest:
    properties:
      baseHash:
        description: Base hash for sync // 同步基准哈希
        type: string
      baseHashMissing:
        description: Marks if baseHash is unavailable // 标记基准哈希是否缺失
        type: boolean
      content:
        description: Note content // 笔记内容
        type: string
      contentHash:
        description: Content hash // 内容哈希
        type: string
      createOnly:
        description: If true, fail if note already exists // 如果为 true，笔记已存在则失败
        type: boolean
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      oldPath:
        description: Old path // 旧路径
        type: string
      oldPathHash:
        description: Old path hash // 旧路径哈希
        type: string
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      srcPath:
        description: Source path (for rename) // 源路径（用于重命名）
        type: string
      srcPathHash:
        description: Source path hash // 源路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.NoteMoveRequest:
    properties:
      destination:
        description: Destination path // 目标路径
        type: string
      overwrite:
        description: Overwrite existing // 覆盖现有
        type: boolean
      path:
        description: Current path // 当前路径
        type: string
      pathHash:
        description: Current path hash // 当前路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - destination
    - path
    - vault
    type: object
  dto.NoteNoContentDTO:
    properties:
      createdAt:
        description: Created at time // 创建时间
        type: string
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      lastTime:
        description: Record update timestamp // 记录更新时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      size:
        description: Note size // 笔记大小
        type: integer
      updatedAt:
        description: Updated at time // 更新时间
        type: string
      version:
        description: Version number // 版本号
        type: integer
    type: object
  dto.NotePatchFrontmatterRequest:
    properties:
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      remove:
        description: Fields to remove // 待移除字段
        items:
          type: string
        type: array
      updates:
        additionalProperties: true
        description: Fields to update // 待更新字段
        type: object
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.NotePrependRequest:
    properties:
      content:
        description: Content to prepend // 头部添加内容
        type: string
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - content
    - path
    - vault
    type: object
  dto.NoteReplaceRequest:
    properties:
      all:
        description: Replace all matches // 替换所有
        type: boolean
      failIfNoMatch:
        description: Fail if no match found // 若无匹配则失败
        type: boolean
      find:
        description: String to find // 查找内容
        type: string
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      regex:
        description: Use regex // 使用正则
        type: boolean
      replace:
        description: String to replace with // 替换内容
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - find
    - path
    - vault
    type: object
  dto.NoteReplaceResponse:
    properties:
      matchCount:
        description: Number of matches found // 匹配数量
        type: integer
      note:
        allOf:
        - $ref: '#/definitions/dto.NoteDTO'
        description: Updated note data // 更新后的笔记数据
    type: object
  dto.NoteRestoreRequest:
    properties:
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - path
    - vault
    type: object
  dto.NoteWithFileLinksResponse:
    properties:
      content:
        description: Note content // 笔记内容
        type: string
      contentHash:
        description: Content hash // 内容哈希
        type: string
      createdAt:
        description: Created at time // 创建时间
      ctime:
        description: Creation timestamp // 创建时间戳
        type: integer
      fileLinks:
        additionalProperties:
          type: string
        description: Map of file link to actual path // 文件链接到实际路径的映射
        type: object
      lastTime:
        description: Record update timestamp // 记录更新时间戳
        type: integer
      mtime:
        description: Modification timestamp // 修改时间戳
        type: integer
      path:
        description: Note path // 笔记路径
        type: string
      pathHash:
        description: Path hash // 路径哈希
        type: string
      updatedAt:
        description: Updated at time // 更新时间
      version:
        description: Version number // 版本号
        type: integer
    type: object
  dto.ShareCreateRequest:
    properties:
      path:
        description: Resource path // 资源路径
        type: string
      path_hash:
        description: Resource path Hash // 资源路径哈希
        type: string
      vault:
        description: Vault name // 保险库名称
        example: defaultVault
        type: string
    required:
    - path
    - path_hash
    - vault
    type: object
  dto.ShareCreateResponse:
    properties:
      expires_at:
        description: Expiration time // 过期时间
        type: string
      id:
        description: ID of the note or file table (primary resource ID) // 笔记或文件表
          ID（主资源 ID）
        type: integer
      token:
        description: Share Token // 分享 Token
        type: string
      type:
        description: 'Resource type: note or file // 资源类型：笔记（note）或文件（file）'
        type: string
    type: object
  dto.StorageDTO:
    properties:
      accessKeyId:
        type: string
      accessKeySecret:
        type: string
      accessUrlPrefix:
        type: string
      accountId:
        type: string
      bucketName:
        type: string
      createdAt:
        type: string
      customPath:
        type: string
      endpoint:
        type: string
      id:
        type: integer
      isDeleted:
        type: boolean
      password:
        type: string
      region:
        type: string
      type:
        type: string
      uid:
        type: integer
      updatedAt:
        type: string
      user:
        type: string
    type: object
  dto.StoragePostRequest:
    properties:
      id:
        type: integer
      storage:
        $ref: '#/definitions/dto.StorageDTO'
    required:
    - storage
    type: object
  dto.UserChangePasswordRequest:
    properties:
      confirmPassword:
        description: Confirm password // 校验密码
        type: string
      oldPassword:
        description: Old password // 旧密码
        type: string
      password:
        description: New password // 新密码
        type: string
    required:
    - confirmPassword
    - oldPassword
    - password
    type: object
  dto.UserCreateRequest:
    properties:
      confirmPassword:
        description: Confirm password // 校验密码
        type: string
      email:
        description: User email // 用户邮件
        type: string
      password:
        description: User password // 用户密码
        type: string
      username:
        description: User name // 用户名
        type: string
    required:
    - confirmPassword
    - email
    - password
    - username
    type: object
  dto.UserDTO:
    properties:
      avatar:
        description: Avatar URL or handle // 头像路径或名称
        type: string
      createdAt:
        description: Account created time // 账号创建时间
        type: string
      email:
        description: Email address // 邮件地址
        type: string
      token:
        description: Authentication Token // 认证 Token
        type: string
      uid:
        description: User ID (primary key) // 用户唯一标识（主键）
        type: integer
      updatedAt:
        description: Last updated time // 最后更新时间
        type: string
      username:
        description: Username // 用户名
        type: string
    type: object
  dto.UserLoginRequest:
    properties:
      credentials:
        description: Username or Email // 登录凭证（用户名或邮件）
        type: string
      password:
        description: Password // 密码
        type: string
    required:
    - credentials
    - password
    type: object
  dto.VaultDTO:
    properties:
      createdAt:
        description: Creation time // 创建时间
        type: string
      fileCount:
        description: Number of files // 文件数量
        type: integer
      fileSize:
        description: Size of files // 文件大小
        type: integer
      id:
        description: Vault ID // 保险库 ID
        type: integer
      noteCount:
        description: Number of notes // 笔记数量
        type: integer
      noteSize:
        description: Size of notes // 笔记大小
        type: integer
      size:
        description: Total size // 总大小
        type: integer
      updatedAt:
        description: Updated time // 更新时间
        type: string
      vault:
        description: Vault name // 保险库名称
        type: string
    type: object
  dto.VaultPostRequest:
    properties:
      id:
        description: Vault ID (optional for update) // 保险库 ID（可选，用于更新）
        type: integer
      vault:
        description: Vault name // 保险库名称
        type: string
    required:
    - vault
    type: object
  dto.VersionDTO:
    properties:
      buildTime:
        description: Build time // 构建时间
        type: string
      gitTag:
        description: Git tag // Git 标签
        type: string
      version:
        description: Current version // 当前版本
        type: string
      versionIsNew:
        description: Is there a new version // 是否有新版本
        type: boolean
      versionNewLink:
        description: New version download link // 新版本下载链接
        type: string
      versionNewName:
        description: New version name // 新版本名称
        type: string
    type: object
host: localhost:9000
info:
  contact:
    email: haierkeys@gmail.com
    name: Haierkeys
    url: https://github.com/haierkeys
  description: This is the Fast Note Sync Service HTTP API.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Fast Note Sync Service HTTP API
  version: "1.0"
paths:
  /api/admin/config:
    get:
      description: Get full system configuration information, requires admin privileges
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIAdminConfig'
              type: object
        "403":
          description: Insufficient privileges
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Get full admin config
      tags:
      - Config
    post:
      consumes:
      - application/json
      description: Modify full system configuration information, requires admin privileges
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Config Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/api_router.webGUIAdminConfig'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIAdminConfig'
              type: object
        "403":
          description: Insufficient privileges
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Update admin config
      tags:
      - Config
  /api/admin/systeminfo:
    get:
      description: Get system information and Go runtime data, requires admin privileges
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.SystemInfo'
              type: object
        "403":
          description: Insufficient privileges
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Get system and runtime info
      tags:
      - System
  /api/file:
    delete:
      description: Permanently delete a specific attachment record and its physical
        file
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: File path // 文件路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        required: true
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Delete attachment
      tags:
      - File
    get:
      description: Get raw binary data of an attachment by path, supports strong cache
        control
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: File path // 文件路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Success
          schema:
            type: file
      security:
      - UserAuthToken: []
      summary: Get attachment content
      tags:
      - File
  /api/file/info:
    get:
      description: Get attachment metadata (FileDTO) by path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: File path // 文件路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get attachment info
      tags:
      - File
  /api/file/restore:
    put:
      description: Restore deleted attachment from trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FileRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FileDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore attachment
      tags:
      - File
  /api/files:
    get:
      description: Get attachment list for current user with pagination, search, filter,
        and sort support
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: Search keyword // 搜索关键词
        in: query
        name: keyword
        type: string
      - description: Sort by field // 排序字段
        in: query
        name: sortBy
        type: string
      - description: Sort order // 排序顺序
        in: query
        name: sortOrder
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.FileDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get file list
      tags:
      - File
  /api/folder:
    delete:
      consumes:
      - application/json
      description: Soft delete a folder by path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Delete Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FolderDeleteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Delete folder
      tags:
      - Folder
    get:
      description: Get folder info for current user by path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Folder path // 文件夹路径
        in: query
        name: path
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder info
      tags:
      - Folder
    post:
      consumes:
      - application/json
      description: Create a new folder or restore a deleted one by path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Create Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.FolderCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create folder
      tags:
      - Folder
  /api/folder/files:
    get:
      description: List non-deleted files in a specific folder with pagination and
        sorting
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Folder path // 文件夹路径
        in: query
        name: path
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Sort by field // 排序字段
        in: query
        name: sortBy
        type: string
      - description: Sort order // 排序顺序
        in: query
        name: sortOrder
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.FileDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: List files in folder
      tags:
      - Folder
  /api/folder/notes:
    get:
      description: List non-deleted notes in a specific folder with pagination and
        sorting
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Folder path // 文件夹路径
        in: query
        name: path
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Sort by field // 排序字段
        in: query
        name: sortBy
        type: string
      - description: Sort order // 排序顺序
        in: query
        name: sortOrder
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: List notes in folder
      tags:
      - Folder
  /api/folder/tree:
    get:
      description: Get the complete folder tree structure for a vault
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Tree depth // 树深度
        in: query
        name: depth
        type: integer
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.FolderTreeResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder tree
      tags:
      - Folder
  /api/folders:
    get:
      description: Get folder list for current user by parent path or pathHash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Folder path // 文件夹路径
        in: query
        name: path
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.FolderDTO'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get folder list
      tags:
      - Folder
  /api/health:
    get:
      description: Check service health status, including database connection
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api_router.HealthResponse'
      summary: Health check
      tags:
      - System
  /api/note:
    delete:
      description: Move note to trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Note path // 笔记路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Delete note
      tags:
      - Note
    get:
      description: Get specific note content and metadata by path or path hash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: Note path // 笔记路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteWithFileLinksResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Get note details
      tags:
      - Note
    post:
      consumes:
      - application/json
      description: Handle note creation, modification, or renaming (identified by
        path change)
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Note Content
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteModifyOrCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create or update note
      tags:
      - Note
  /api/note/append:
    post:
      consumes:
      - application/json
      description: Append content to the end of a note
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Append Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteAppendRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Append content to note
      tags:
      - Note
  /api/note/backlinks:
    get:
      description: Get all other notes that link to the specified note
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Note path // 笔记路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.NoteLinkItem'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get backlinks
      tags:
      - Note
  /api/note/frontmatter:
    patch:
      consumes:
      - application/json
      description: Update or delete note frontmatter fields
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Frontmatter Modification Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NotePatchFrontmatterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Modify note frontmatter
      tags:
      - Note
  /api/note/histories:
    get:
      description: Get all history records for a specific note with pagination
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: Note path // 笔记路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteHistoryDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get note history list
      tags:
      - Note History
  /api/note/history:
    get:
      description: Get specific note history content by history record ID
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: History Record ID
        format: int64
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteHistoryDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get note history details
      tags:
      - Note History
  /api/note/history/restore:
    put:
      consumes:
      - application/json
      description: Restore note content to a specific history version
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteHistoryRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore note from history
      tags:
      - Note History
  /api/note/move:
    post:
      consumes:
      - application/json
      description: Move a note to a new path
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Move Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteMoveRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Move note
      tags:
      - Note
  /api/note/outlinks:
    get:
      description: Get other notes that the specified note links to
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Note path // 笔记路径
        in: query
        name: path
        required: true
        type: string
      - description: Path hash // 路径哈希
        in: query
        name: pathHash
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.NoteLinkItem'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get outgoing links
      tags:
      - Note
  /api/note/prepend:
    post:
      consumes:
      - application/json
      description: Insert content at the beginning of a note (after frontmatter)
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Prepend Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NotePrependRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Prepend content to note
      tags:
      - Note
  /api/note/replace:
    post:
      consumes:
      - application/json
      description: Perform find and replace operation in a note, supporting regular
        expressions
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Find and Replace Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteReplaceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteReplaceResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Find and replace in note
      tags:
      - Note
  /api/note/restore:
    put:
      description: Restore deleted note from trash
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Restore Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.NoteRestoreRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Restore note
      tags:
      - Note
  /api/notes:
    get:
      description: Get note list for current user with pagination
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Is in recycle bin // 是否在回收站
        in: query
        name: isRecycle
        type: boolean
      - description: Search keyword // 搜索关键词
        in: query
        name: keyword
        type: string
      - description: Whether to search content // 是否搜索内容
        in: query
        name: searchContent
        type: boolean
      - description: Search mode (path, content, regex) // 搜索模式（路径、内容、正则）
        in: query
        name: searchMode
        type: string
      - description: Sort by field // 排序字段
        in: query
        name: sortBy
        type: string
      - description: Sort order // 排序顺序
        in: query
        name: sortOrder
        type: string
      - description: Vault name // 保险库名称
        in: query
        name: vault
        required: true
        type: string
      - description: Page number // 页码
        in: query
        name: page
        type: integer
      - description: Page size // 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  allOf:
                  - $ref: '#/definitions/app.ListRes'
                  - properties:
                      list:
                        items:
                          $ref: '#/definitions/dto.NoteNoContentDTO'
                        type: array
                    type: object
              type: object
      security:
      - UserAuthToken: []
      summary: Get note list
      tags:
      - Note
  /api/share:
    post:
      consumes:
      - application/json
      description: Create a share token for a specific note or attachment, automatically
        resolve attachment references and authorize
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Share Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.ShareCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.ShareCreateResponse'
              type: object
      security:
      - UserAuthToken: []
      summary: Create resource share
      tags:
      - Share
  /api/share/file:
    get:
      description: Get raw binary data of a specific attachment via share token
      parameters:
      - description: Auth Token
        in: header
        name: Share-Token
        required: true
        type: string
      - description: Resource ID // 资源 ID
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Success
          schema:
            type: file
      security:
      - ShareAuthToken: []
      summary: Get shared attachment content
      tags:
      - Share
  /api/share/note:
    get:
      description: Get specific note content (restricted read-only access) via share
        token
      parameters:
      - description: Auth Token
        in: header
        name: Share-Token
        required: true
        type: string
      - description: Resource ID // 资源 ID
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.NoteDTO'
              type: object
      security:
      - ShareAuthToken: []
      summary: Get shared note details
      tags:
      - Share
  /api/storage:
    delete:
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Storage ID
        format: int64
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Delete storage configuration
      tags:
      - Storage
    get:
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.StorageDTO'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get storage configuration list
      tags:
      - Storage
    post:
      consumes:
      - application/json
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Storage Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.StoragePostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.StorageDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create or update storage configuration
      tags:
      - Storage
  /api/user/change_password:
    post:
      consumes:
      - application/json
      description: |-
        Handle password change request for current user, validate old password and update new password.
        处理当前用户的修改密码请求，验证旧密码并更新新密码。
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Change Password Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
        "400":
          description: Invalid Parameters / Old Password Incorrect
          schema:
            $ref: '#/definitions/app.Res'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Change user password
      tags:
      - User
  /api/user/info:
    get:
      consumes:
      - application/json
      description: |-
        Handle request to get current user info.
        处理获取当前用户信息的请求。
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Get user info
      tags:
      - User
  /api/user/login:
    post:
      consumes:
      - application/json
      description: |-
        Handle user login HTTP request, validate parameters and return auth token.
        处理用户登录 HTTP 请求，验证参数并返回认证 Token。
      parameters:
      - description: Login Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserLoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "400":
          description: Invalid Parameters / Invalid Credentials
          schema:
            $ref: '#/definitions/app.Res'
      summary: User login
      tags:
      - User
  /api/user/register:
    post:
      consumes:
      - application/json
      description: |-
        Handle user registration HTTP request, validate parameters and call UserService. Registration may be disabled in server settings.
        处理用户注册 HTTP 请求，验证参数并调用 UserService。注册功能可能在服务器设置中被禁用。
      parameters:
      - description: Register Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.UserCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserDTO'
              type: object
        "400":
          description: Invalid Parameters / Registration Disabled / User Already Exists
          schema:
            $ref: '#/definitions/app.Res'
      summary: User registration
      tags:
      - User
  /api/vault:
    delete:
      description: Permanently delete a specific note vault and all associated notes
        and attachments
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Vault ID // 保险库 ID
        in: query
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/app.Res'
      security:
      - UserAuthToken: []
      summary: Delete vault
      tags:
      - Vault
    get:
      description: Get all note vaults for current user
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.VaultDTO'
                  type: array
              type: object
      security:
      - UserAuthToken: []
      summary: Get vault list
      tags:
      - Vault
    post:
      consumes:
      - application/json
      description: Be used to create a new vault or update an existing vault configuration
        based on the ID in the request parameters
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Vault Parameters
        in: body
        name: params
        required: true
        schema:
          $ref: '#/definitions/dto.VaultPostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.VaultDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Create or update vault
      tags:
      - Vault
  /api/vault/get:
    get:
      description: Get specific vault configuration details by vault ID
      parameters:
      - description: Auth Token
        in: header
        name: token
        required: true
        type: string
      - description: Vault ID
        format: int64
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.VaultDTO'
              type: object
      security:
      - UserAuthToken: []
      summary: Get vault details
      tags:
      - Vault
  /api/version:
    get:
      description: Get current server software version, Git tag, and build time
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/dto.VersionDTO'
              type: object
      summary: Get server version info
      tags:
      - System
  /api/webgui/config:
    get:
      description: Get non-sensitive configuration required for frontend display,
        such as font settings, registration status, etc.
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            allOf:
            - $ref: '#/definitions/app.Res'
            - properties:
                data:
                  $ref: '#/definitions/api_router.webGUIConfig'
              type: object
      summary: Get WebGUI basic config
      tags:
      - Config
securityDefinitions:
  ShareAuthToken:
    in: header
    name: Share-Token
    type: apiKey
  UserAuthToken:
    in: header
    name: token
    type: apiKey
swagger: "2.0"
